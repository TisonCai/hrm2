{"remainingRequest":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js!/Users/caichaosen/Code/web/hrm-ui2/node_modules/eslint-loader/index.js??ref--13-0!/Users/caichaosen/Code/web/hrm-ui2/src/store/modules/permission.js","dependencies":[{"path":"/Users/caichaosen/Code/web/hrm-ui2/src/store/modules/permission.js","mtime":1612438700767},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiKTsKCk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsKICB2YWx1ZTogdHJ1ZQp9KTsKZXhwb3J0cy5kZWZhdWx0ID0gZXhwb3J0cy5sb2FkVmlldyA9IHZvaWQgMDsKCnZhciBfcm91dGVyID0gcmVxdWlyZSgiQC9yb3V0ZXIiKTsKCnZhciBfbWVudSA9IHJlcXVpcmUoIkAvYXBpL21lbnUiKTsKCnZhciBwZXJtaXNzaW9uID0gewogIHN0YXRlOiB7CiAgICByb3V0ZXM6IFtdLAogICAgYWRkUm91dGVzOiBbXQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBTRVRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgICAgc3RhdGUuYWRkUm91dGVzID0gcm91dGVzOwogICAgICBzdGF0ZS5yb3V0ZXMgPSBfcm91dGVyLmNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLy8g55Sf5oiQ6Lev55SxCiAgICBHZW5lcmF0ZVJvdXRlczogZnVuY3Rpb24gR2VuZXJhdGVSb3V0ZXMoX3JlZikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIC8vIOWQkeWQjuerr+ivt+axgui3r+eUseaVsOaNrgogICAgICAgICgwLCBfbWVudS5nZXRSb3V0ZXJzKSh7CiAgICAgICAgICBtb2R1bGVDb2RlOiAnJwogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgY29uc29sZS5sb2coJ2dldFJvdXRlcnMnLCByZXMpOyAvLyBjb25zdCBhY2Nlc3NlZFJvdXRlcyA9IGZpbHRlckFzeW5jUm91dGVyKHJlcy5kYXRhKQogICAgICAgICAgLy8gYWNjZXNzZWRSb3V0ZXMucHVzaCh7IHBhdGg6ICcqJywgcmVkaXJlY3Q6ICcvNDA0JywgaGlkZGVuOiB0cnVlIH0pCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhY2Nlc3NlZFJvdXRlcykKICAgICAgICAgIC8vIGNvbW1pdCgnU0VUX1JPVVRFUycsIGFjY2Vzc2VkUm91dGVzKQogICAgICAgICAgLy8gcmVzb2x2ZShhY2Nlc3NlZFJvdXRlcykKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfQp9OyAvLyDpgY3ljoblkI7lj7DkvKDmnaXnmoTot6/nlLHlrZfnrKbkuLLvvIzovazmjaLkuLrnu4Tku7blr7nosaEKLy8gZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXIoYXN5bmNSb3V0ZXJNYXApIHsKLy8gICByZXR1cm4gYXN5bmNSb3V0ZXJNYXAuZmlsdGVyKHJvdXRlID0+IHsKLy8gICAgIGlmIChyb3V0ZS5jb21wb25lbnQpIHsKLy8gICAgICAgLy8gTGF5b3V057uE5Lu254m55q6K5aSE55CGCi8vICAgICAgIGlmIChyb3V0ZS5jb21wb25lbnQgPT09ICdMYXlvdXQnKSB7Ci8vICAgICAgICAgcm91dGUuY29tcG9uZW50ID0gTGF5b3V0Ci8vICAgICAgIH0gZWxzZSB7Ci8vICAgICAgICAgcm91dGUuY29tcG9uZW50ID0gbG9hZFZpZXcocm91dGUuY29tcG9uZW50KQovLyAgICAgICB9Ci8vICAgICB9Ci8vICAgICBpZiAocm91dGUuY2hpbGRyZW4gIT0gbnVsbCAmJiByb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGgpIHsKLy8gICAgICAgcm91dGUuY2hpbGRyZW4gPSBmaWx0ZXJBc3luY1JvdXRlcihyb3V0ZS5jaGlsZHJlbikKLy8gICAgIH0KLy8gICAgIHJldHVybiB0cnVlCi8vICAgfSkKLy8gfQoKdmFyIGxvYWRWaWV3ID0gZnVuY3Rpb24gbG9hZFZpZXcodmlldykgewogIC8vIOi3r+eUseaHkuWKoOi9vQogIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmV0dXJuIHJlcXVpcmUoWyJAL3ZpZXdzLyIuY29uY2F0KHZpZXcpXSwgcmVzb2x2ZSk7CiAgfTsKfTsKCmV4cG9ydHMubG9hZFZpZXcgPSBsb2FkVmlldzsKdmFyIF9kZWZhdWx0ID0gcGVybWlzc2lvbjsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/caichaosen/Code/web/hrm-ui2/src/store/modules/permission.js"],"names":["permission","state","routes","addRoutes","mutations","SET_ROUTES","constantRoutes","concat","actions","GenerateRoutes","commit","Promise","resolve","moduleCode","then","res","console","log","loadView","view","require"],"mappings":";;;;;;;;;;;AAAA;;AACA;;AAEA,IAAMA,UAAU,GAAG;AACjBC,EAAAA,KAAK,EAAE;AACLC,IAAAA,MAAM,EAAE,EADH;AAELC,IAAAA,SAAS,EAAE;AAFN,GADU;AAKjBC,EAAAA,SAAS,EAAE;AACTC,IAAAA,UAAU,EAAE,oBAACJ,KAAD,EAAQC,MAAR,EAAmB;AAC7BD,MAAAA,KAAK,CAACE,SAAN,GAAkBD,MAAlB;AACAD,MAAAA,KAAK,CAACC,MAAN,GAAeI,uBAAeC,MAAf,CAAsBL,MAAtB,CAAf;AACD;AAJQ,GALM;AAWjBM,EAAAA,OAAO,EAAE;AACP;AACAC,IAAAA,cAFO,gCAEoB;AAAA,UAAVC,MAAU,QAAVA,MAAU;AACzB,aAAO,IAAIC,OAAJ,CAAY,UAAAC,OAAO,EAAI;AAC5B;AACA,8BAAW;AAAEC,UAAAA,UAAU,EAAE;AAAd,SAAX,EAA+BC,IAA/B,CAAoC,UAAAC,GAAG,EAAI;AACzCC,UAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BF,GAA1B,EADyC,CAEzC;AACA;AACA;AACA;AACA;AACD,SAPD;AAQD,OAVM,CAAP;AAWD;AAdM;AAXQ,CAAnB,C,CA6BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD,EAAU;AAAE;AAClC,SAAO,UAACP,OAAD;AAAA,WAAaQ,OAAO,CAAC,mBAAYD,IAAZ,EAAD,EAAsBP,OAAtB,CAApB;AAAA,GAAP;AACD,CAFM;;;eAIQZ,U","sourcesContent":["import { constantRoutes } from '@/router'\r\nimport { getRouters } from '@/api/menu'\r\n\r\nconst permission = {\r\n  state: {\r\n    routes: [],\r\n    addRoutes: []\r\n  },\r\n  mutations: {\r\n    SET_ROUTES: (state, routes) => {\r\n      state.addRoutes = routes\r\n      state.routes = constantRoutes.concat(routes)\r\n    }\r\n  },\r\n  actions: {\r\n    // 生成路由\r\n    GenerateRoutes({ commit }) {\r\n      return new Promise(resolve => {\r\n        // 向后端请求路由数据\r\n        getRouters({ moduleCode: '' }).then(res => {\r\n          console.log('getRouters', res)\r\n          // const accessedRoutes = filterAsyncRouter(res.data)\r\n          // accessedRoutes.push({ path: '*', redirect: '/404', hidden: true })\r\n          // console.log(accessedRoutes)\r\n          // commit('SET_ROUTES', accessedRoutes)\r\n          // resolve(accessedRoutes)\r\n        })\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\n// 遍历后台传来的路由字符串，转换为组件对象\r\n// function filterAsyncRouter(asyncRouterMap) {\r\n//   return asyncRouterMap.filter(route => {\r\n//     if (route.component) {\r\n//       // Layout组件特殊处理\r\n//       if (route.component === 'Layout') {\r\n//         route.component = Layout\r\n//       } else {\r\n//         route.component = loadView(route.component)\r\n//       }\r\n//     }\r\n//     if (route.children != null && route.children && route.children.length) {\r\n//       route.children = filterAsyncRouter(route.children)\r\n//     }\r\n//     return true\r\n//   })\r\n// }\r\n\r\nexport const loadView = (view) => { // 路由懒加载\r\n  return (resolve) => require([`@/views/${view}`], resolve)\r\n}\r\n\r\nexport default permission\r\n"]}]}