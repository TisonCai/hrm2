{"remainingRequest":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js!/Users/caichaosen/Code/web/hrm-ui2/node_modules/eslint-loader/index.js??ref--13-0!/Users/caichaosen/Code/web/hrm-ui2/src/directive/src/index.js","dependencies":[{"path":"/Users/caichaosen/Code/web/hrm-ui2/src/directive/src/index.js","mtime":1612494908531},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyIpOwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Ci8vIGltcG9ydCB7IGdldEltYWdlRGF0YSB9IGZyb20gJ0AvdXRpbHMnCndpbmRvdy5kYXRhQ2FjaGUgPSB7fTsKCnZhciBsb2FkRGF0YSA9IGZ1bmN0aW9uIGxvYWREYXRhKGVsLCBiaW5kaW5nKSB7CiAgdmFyIGxvYWRpbmdJbWcgPSByZXF1aXJlKCdAL2Fzc2V0cy9pbWcvd2hpdGUucG5nJyk7CgogIHNldFNyYyhlbCwgYmluZGluZywgbG9hZGluZ0ltZyk7CgogIGlmIChiaW5kaW5nLnZhbHVlICYmIChiaW5kaW5nLnZhbHVlLmluZGV4T2YoJy9maWxlL2Rvd25GaWxlJykgPT0gMCB8fCBiaW5kaW5nLnZhbHVlLmluZGV4T2YoJy9hZG1pbkZpbGUvZG93bicpID09IDApKSB7CiAgICB2YXIgc3JjID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LkJBU0VfQVBJKS5jb25jYXQoYmluZGluZy52YWx1ZSk7CiAgICBzZXRTcmMoZWwsIGJpbmRpbmcsIHNyYy5yZXBsYWNlKCcvLycsICcvJykpOyAvLyBpZiAod2luZG93LmRhdGFDYWNoZVtiaW5kaW5nLnZhbHVlXSkgewogICAgLy8gICBzZXRTcmMoZWwsIGJpbmRpbmcsIHdpbmRvdy5kYXRhQ2FjaGVbYmluZGluZy52YWx1ZV0pCiAgICAvLyB9IGVsc2UgewogICAgLy8gICBnZXRJbWFnZURhdGEoYmluZGluZy52YWx1ZSkudGhlbigoZGF0YSkgPT4gewogICAgLy8gICAgIHNldFNyYyhlbCwgYmluZGluZywgZGF0YS5zcmMpCiAgICAvLyAgICAgd2luZG93LmRhdGFDYWNoZVtiaW5kaW5nLnZhbHVlXSA9IGRhdGEuc3JjCiAgICAvLyAgIH0pLmNhdGNoKCgpID0+IHt9KQogICAgLy8gfQogIH0gZWxzZSB7CiAgICBzZXRTcmMoZWwsIGJpbmRpbmcsIGJpbmRpbmcudmFsdWUpOwogIH0KfTsKCnZhciBzZXRTcmMgPSBmdW5jdGlvbiBzZXRTcmMoZWwsIGJpbmRpbmcsIHNyYykgewogIGlmIChiaW5kaW5nLmFyZykgewogICAgZWwuc3R5bGVbYmluZGluZy5hcmddID0gJ3VybCgiJyArIHNyYyArICciKSc7CiAgfSBlbHNlIHsKICAgIGVsLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTsKICB9IC8vIOWmguaenOS4jeaYr2ltZ+agh+etvuWImeaJi+WKqOinpuWPkSBvbmxvYWQg5LqL5Lu277yM6YCa55+l5Zu+54mH5bey57uP6I635Y+W5YiwCgoKICBpZiAoZWwudGFnTmFtZSAhPT0gJ0lNRycpIHsKICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpOwogICAgZXZ0LmluaXRFdmVudCgnbG9hZCcsIGZhbHNlLCB0cnVlKTsKICAgIGVsLmRpc3BhdGNoRXZlbnQoZXZ0KTsKICB9Cn07Cgp2YXIgX2RlZmF1bHQgPSB7CiAgbmFtZTogJ3NyYycsCiAgaW5zZXJ0ZWQ6IGZ1bmN0aW9uIGluc2VydGVkKGVsLCBiaW5kaW5nKSB7CiAgICBsb2FkRGF0YShlbCwgYmluZGluZyk7CiAgfSwKICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShlbCwgYmluZGluZykgewogICAgaWYgKGJpbmRpbmcub2xkVmFsdWUgIT0gYmluZGluZy52YWx1ZSkgewogICAgICBsb2FkRGF0YShlbCwgYmluZGluZyk7CiAgICB9CiAgfSwKICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZChlbCkge30KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/caichaosen/Code/web/hrm-ui2/src/directive/src/index.js"],"names":["window","dataCache","loadData","el","binding","loadingImg","require","setSrc","value","indexOf","src","process","env","BASE_API","replace","arg","style","setAttribute","tagName","evt","document","createEvent","initEvent","dispatchEvent","name","inserted","update","oldValue","unbind"],"mappings":";;;;;;;;;;;;;;AAAA;AAEAA,MAAM,CAACC,SAAP,GAAmB,EAAnB;;AAEA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,EAAD,EAAKC,OAAL,EAAiB;AAChC,MAAMC,UAAU,GAAGC,OAAO,CAAC,wBAAD,CAA1B;;AACAC,EAAAA,MAAM,CAACJ,EAAD,EAAKC,OAAL,EAAcC,UAAd,CAAN;;AAEA,MAAID,OAAO,CAACI,KAAR,KAAkBJ,OAAO,CAACI,KAAR,CAAcC,OAAd,CAAsB,gBAAtB,KAA2C,CAA3C,IACtBL,OAAO,CAACI,KAAR,CAAcC,OAAd,CAAsB,iBAAtB,KAA4C,CADxC,CAAJ,EACgD;AAC9C,QAAMC,GAAG,aAAMC,OAAO,CAACC,GAAR,CAAYC,QAAlB,SAA6BT,OAAO,CAACI,KAArC,CAAT;AACAD,IAAAA,MAAM,CAACJ,EAAD,EAAKC,OAAL,EAAcM,GAAG,CAACI,OAAJ,CAAY,IAAZ,EAAkB,GAAlB,CAAd,CAAN,CAF8C,CAG9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,GAZD,MAYO;AACLP,IAAAA,MAAM,CAACJ,EAAD,EAAKC,OAAL,EAAcA,OAAO,CAACI,KAAtB,CAAN;AACD;AACF,CAnBD;;AAqBA,IAAMD,MAAM,GAAG,SAATA,MAAS,CAACJ,EAAD,EAAKC,OAAL,EAAcM,GAAd,EAAsB;AACnC,MAAIN,OAAO,CAACW,GAAZ,EAAiB;AACfZ,IAAAA,EAAE,CAACa,KAAH,CAASZ,OAAO,CAACW,GAAjB,IAAwB,UAAUL,GAAV,GAAgB,IAAxC;AACD,GAFD,MAEO;AACLP,IAAAA,EAAE,CAACc,YAAH,CAAgB,KAAhB,EAAuBP,GAAvB;AACD,GALkC,CAMnC;;;AACA,MAAIP,EAAE,CAACe,OAAH,KAAe,KAAnB,EAA0B;AACxB,QAAMC,GAAG,GAAGC,QAAQ,CAACC,WAAT,CAAqB,YAArB,CAAZ;AACAF,IAAAA,GAAG,CAACG,SAAJ,CAAc,MAAd,EAAsB,KAAtB,EAA6B,IAA7B;AACAnB,IAAAA,EAAE,CAACoB,aAAH,CAAiBJ,GAAjB;AACD;AACF,CAZD;;eAce;AACbK,EAAAA,IAAI,EAAE,KADO;AAEbC,EAAAA,QAFa,oBAEJtB,EAFI,EAEAC,OAFA,EAES;AACpBF,IAAAA,QAAQ,CAACC,EAAD,EAAKC,OAAL,CAAR;AACD,GAJY;AAKbsB,EAAAA,MAAM,EAAE,gBAASvB,EAAT,EAAaC,OAAb,EAAsB;AAC5B,QAAIA,OAAO,CAACuB,QAAR,IAAoBvB,OAAO,CAACI,KAAhC,EAAuC;AACrCN,MAAAA,QAAQ,CAACC,EAAD,EAAKC,OAAL,CAAR;AACD;AACF,GATY;AAUbwB,EAAAA,MAVa,kBAUNzB,EAVM,EAUF,CACV;AAXY,C","sourcesContent":["// import { getImageData } from '@/utils'\n\nwindow.dataCache = {}\n\nconst loadData = (el, binding) => {\n  const loadingImg = require('@/assets/img/white.png')\n  setSrc(el, binding, loadingImg)\n\n  if (binding.value && (binding.value.indexOf('/file/downFile') == 0 ||\n  binding.value.indexOf('/adminFile/down') == 0)) {\n    const src = `${process.env.BASE_API}${binding.value}`\n    setSrc(el, binding, src.replace('//', '/'))\n    // if (window.dataCache[binding.value]) {\n    //   setSrc(el, binding, window.dataCache[binding.value])\n    // } else {\n    //   getImageData(binding.value).then((data) => {\n    //     setSrc(el, binding, data.src)\n    //     window.dataCache[binding.value] = data.src\n    //   }).catch(() => {})\n    // }\n  } else {\n    setSrc(el, binding, binding.value)\n  }\n}\n\nconst setSrc = (el, binding, src) => {\n  if (binding.arg) {\n    el.style[binding.arg] = 'url(\"' + src + '\")'\n  } else {\n    el.setAttribute('src', src)\n  }\n  // 如果不是img标签则手动触发 onload 事件，通知图片已经获取到\n  if (el.tagName !== 'IMG') {\n    const evt = document.createEvent('HTMLEvents')\n    evt.initEvent('load', false, true)\n    el.dispatchEvent(evt)\n  }\n}\n\nexport default {\n  name: 'src',\n  inserted(el, binding) {\n    loadData(el, binding)\n  },\n  update: function(el, binding) {\n    if (binding.oldValue != binding.value) {\n      loadData(el, binding)\n    }\n  },\n  unbind(el) {\n  }\n}\n\n"]}]}