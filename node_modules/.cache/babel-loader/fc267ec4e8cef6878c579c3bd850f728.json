{"remainingRequest":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js!/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/caichaosen/Code/web/hrm-ui2/src/layout/components/SystemMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/caichaosen/Code/web/hrm-ui2/src/layout/components/SystemMessage.vue","mtime":1612489481008},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvY2FpY2hhb3Nlbi9Db2RlL3dlYi9ocm0tdWkyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfb2JqZWN0U3ByZWFkMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiL1VzZXJzL2NhaWNoYW9zZW4vQ29kZS93ZWIvaHJtLXVpMi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9vYmplY3RTcHJlYWQyIikpOwoKdmFyIF9NZXNzYWdlQ2VsbCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9NZXNzYWdlQ2VsbCIpKTsKCnZhciBfaW5kZXggPSByZXF1aXJlKCJAL3V0aWxzL2luZGV4Iik7Cgp2YXIgX3Z1ZXggPSByZXF1aXJlKCJ2dWV4Iik7CgovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLyBpbXBvcnQgewovLyAgIHN5c3RlbU1lc3NhZ2VMaXN0QVBJLAovLyAgIHN5c3RlbU1lc3NhZ2VSZWFkQVBJLAovLyAgIHN5c3RlbU1lc3NhZ2VSZWFkQWxsQVBJLAovLyAgIHN5c3RlbU1lc3NhZ2VDbGVhckFQSSwKLy8gICBzeXN0ZW1NZXNzYWdlRGVsZXRlQnlJZEFQSSB9IGZyb20gJ0AvYXBpL2NvbW1vbicKLy8gaW1wb3J0IHsKLy8gICBjcm1Eb3duSW1wb3J0RXJyb3JBUEkKLy8gfSBmcm9tICdAL2FwaS9jcm0vY29tbW9uJwovLyBpbXBvcnQgU2xpZGVWaWV3IGZyb20gJ0AvY29tcG9uZW50cy9TbGlkZVZpZXcnCnZhciBfZGVmYXVsdCA9IHsKICAvLyDlr7zoiKrlpLTpg6jns7vnu5/mtojmga8KICBuYW1lOiAnU3lzdGVtTWVzc2FnZScsCiAgY29tcG9uZW50czogewogICAgLy8gU2xpZGVWaWV3LAogICAgTWVzc2FnZUNlbGw6IF9NZXNzYWdlQ2VsbC5kZWZhdWx0IC8vIENSTUZ1bGxTY3JlZW5EZXRhaWw6ICgpID0+CiAgICAvLyAgIGltcG9ydCgnQC9jb21wb25lbnRzL0NSTUZ1bGxTY3JlZW5EZXRhaWwnKQoKICB9LAogIHByb3BzOiB7CiAgICB2aXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5LuF5YWs5ZGKCiAgICBvbmx5QW5ub3VuY2VtZW50OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgdW5yZWFkTnVtczogT2JqZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RvZGF5RGV0YWlsOiBmYWxzZSwKICAgICAgdG9kYXlEZXRhaWxEYXRhOiB7fSwKICAgICAgc2hvd0RldGFpbDogZmFsc2UsCiAgICAgIC8vIDEg5Lu75YqhIDIg5pel5b+XIDMgb2HlrqHmibkgNOWFrOWRiiA1IOaXpeeoiyA2IOWuouaIt+euoeeQhgogICAgICBtZW51TGFiZWw6ICdhbGwnLAogICAgICAvLyDlhazlkYoKICAgICAgYW5ub3VuY2VtZW50QWRkU2hvdzogZmFsc2UsCiAgICAgIC8vIOWIl+ihqAogICAgICBsaXN0OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIG5vTW9yZTogZmFsc2UsCiAgICAgIHNjcm9sbEtleTogRGF0ZS5ub3coKSwKICAgICAgcGFnZTogMSwKICAgICAgaXNVblJlYWQ6IGZhbHNlLAogICAgICAvLyDku4XlsZXnpLrmnKror7sKICAgICAgLy8gQ1JN6K+m5oOFCiAgICAgIHNob3dGdWxsRGV0YWlsOiBmYWxzZSwKICAgICAgLy8g5p+l55yL55u45YWz5a6i5oi3566h55CG6K+m5oOFCiAgICAgIHJlbGF0aW9uSUQ6ICcnLAogICAgICAvLyDnm7jlhbNJROWPguaVsAogICAgICByZWxhdGlvbkNybVR5cGU6ICcnIC8vIOebuOWFs+exu+WeiwoKICAgIH07CiAgfSwKICBjb21wdXRlZDogKDAsIF9vYmplY3RTcHJlYWQyLmRlZmF1bHQpKCgwLCBfb2JqZWN0U3ByZWFkMi5kZWZhdWx0KSh7fSwgKDAsIF92dWV4Lm1hcEdldHRlcnMpKFsnb2EnLCAnY3JtJywgJ3Byb2plY3QnXSkpLCB7fSwgewogICAgcGVybWlzc2lvblNhdmU6IGZ1bmN0aW9uIHBlcm1pc3Npb25TYXZlKCkgewogICAgICByZXR1cm4gdGhpcy5vYSAmJiB0aGlzLm9hLmFubm91bmNlbWVudCAmJiB0aGlzLm9hLmFubm91bmNlbWVudC5zYXZlOwogICAgfSwKICAgIHRpdGxlOiBmdW5jdGlvbiB0aXRsZSgpIHsKICAgICAgaWYgKHRoaXMub25seUFubm91bmNlbWVudCkgewogICAgICAgIHJldHVybiB0aGlzLnVucmVhZE51bXMuYW5ub3VuY2VDb3VudCAmJiB0aGlzLnVucmVhZE51bXMuYW5ub3VuY2VDb3VudCA+IDAgPyAiXHU1MTZDXHU1NDRBXHVGRjA4Ii5jb25jYXQodGhpcy51bnJlYWROdW1zLmFubm91bmNlQ291bnQsICJcdUZGMDkiKSA6ICflhazlkYonOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy51bnJlYWROdW1zLmFsbEN1bnQgPiAwID8gIlx1OTAxQVx1NzdFNVx1RkYwOCIuY29uY2F0KHRoaXMudW5yZWFkTnVtcy5hbGxDdW50LCAiXHVGRjA5IikgOiAn6YCa55+lJzsKICAgIH0sCiAgICBzY3JvbGxEaXNhYmxlZDogZnVuY3Rpb24gc2Nyb2xsRGlzYWJsZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmxvYWRpbmcgfHwgdGhpcy5ub01vcmU7CiAgICB9LAogICAgbGFiZWxWYWx1ZTogZnVuY3Rpb24gbGFiZWxWYWx1ZSgpIHsKICAgICAgaWYgKHRoaXMub25seUFubm91bmNlbWVudCkgewogICAgICAgIHJldHVybiA0OwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tZW51TGFiZWwgPT0gJ2FsbCcgPyAnJyA6IHRoaXMubWVudUxhYmVsOwogICAgfSwKICAgIGNvbnRlbnRIZWlnaHQ6IGZ1bmN0aW9uIGNvbnRlbnRIZWlnaHQoKSB7CiAgICAgIGlmICh0aGlzLm1lbnVMaXN0Lmxlbmd0aCA+IDcpIHsKICAgICAgICByZXR1cm4gJ2NhbGMoMTAwJSAtIDExMHB4KSc7CiAgICAgIH0KCiAgICAgIHJldHVybiAnY2FsYygxMDAlIC0gMTU1cHgpJzsKICAgIH0sCiAgICBtZW51TGlzdDogZnVuY3Rpb24gbWVudUxpc3QoKSB7CiAgICAgIHZhciBtZW51TGlzdCA9IFt7CiAgICAgICAgbmFtZTogJ+WFqOmDqCcsCiAgICAgICAgbGFiZWw6ICdhbGwnLAogICAgICAgIGNvdW50S2V5OiAnYWxsQ291bnQnCiAgICAgIH1dOwoKICAgICAgaWYgKHRoaXMub2EpIHsKICAgICAgICAvLyBtZW51TGlzdC5wdXNoKHsKICAgICAgICAvLyAgIG5hbWU6ICflhazlkYonLAogICAgICAgIC8vICAgbGFiZWw6IDQsCiAgICAgICAgLy8gICBjb3VudEtleTogJ2Fubm91bmNlQ291bnQnCiAgICAgICAgLy8gfSkKICAgICAgICBpZiAodGhpcy5vYS50YXNrRXhhbWluZSkgewogICAgICAgICAgbWVudUxpc3QucHVzaCh7CiAgICAgICAgICAgIG5hbWU6ICflip7lhazlrqHmibknLAogICAgICAgICAgICBsYWJlbDogMywKICAgICAgICAgICAgY291bnRLZXk6ICdleGFtaW5lQ291bnQnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9hICYmIHRoaXMub2EudGFza0V4YW1pbmUgfHwgdGhpcy5wcm9qZWN0KSB7CiAgICAgICAgbWVudUxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiAn5Lu75YqhJywKICAgICAgICAgIGxhYmVsOiAxLAogICAgICAgICAgY291bnRLZXk6ICd0YXNrQ291bnQnCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm9hICYmIHRoaXMub2EubG9nKSB7CiAgICAgICAgbWVudUxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiAn5pel5b+XJywKICAgICAgICAgIGxhYmVsOiAyLAogICAgICAgICAgY291bnRLZXk6ICdsb2dDb3VudCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuY3JtKSB7CiAgICAgICAgbWVudUxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiAn5a6i5oi3566h55CGJywKICAgICAgICAgIGxhYmVsOiA2LAogICAgICAgICAgY291bnRLZXk6ICdjcm1Db3VudCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMub2EgJiYgdGhpcy5vYS5jYWxlbmRhcikgewogICAgICAgIG1lbnVMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogJ+aXpeeoiycsCiAgICAgICAgICBsYWJlbDogNSwKICAgICAgICAgIGNvdW50S2V5OiAnZXZlbnRDb3VudCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG1lbnVMaXN0OwogICAgfSwKICAgIGN1cnJlbnRNZW51OiBmdW5jdGlvbiBjdXJyZW50TWVudSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiB0aGlzLm1lbnVMaXN0LmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5sYWJlbCA9PT0gX3RoaXMubWVudUxhYmVsOwogICAgICB9KTsKICAgIH0KICB9KSwKICB3YXRjaDogewogICAgdmlzaWJsZTogewogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMuc2hvd0RldGFpbCA9IHZhbDsKCiAgICAgICAgaWYgKHZhbCkgewogICAgICAgICAgdGhpcy4kZWwuc3R5bGUuekluZGV4ID0gKDAsIF9pbmRleC5nZXRNYXhJbmRleCkoKTsKICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfSwKICAgIHNob3dEZXRhaWw6IGZ1bmN0aW9uIHNob3dEZXRhaWwodmFsKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaWYgKCF2YWwpIHsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMi4kZW1pdCgndXBkYXRlOnZpc2libGUnLCBmYWxzZSk7CiAgICAgICAgfSwgMzUwKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGhpcy4kZWwpOwogICAgdGhpcy4kZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZURvY3VtZW50Q2xpY2ssIGZhbHNlKTsKICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICAvLyByZW1vdmUgRE9NIG5vZGUgYWZ0ZXIgZGVzdHJveQogICAgaWYgKHRoaXMuJGVsICYmIHRoaXMuJGVsLnBhcmVudE5vZGUpIHsKICAgICAgdGhpcy4kZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLiRlbCk7CiAgICAgIHRoaXMuJGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrLCBmYWxzZSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIOaXpeeoi+S6i+S7tgogICAgICovCiAgICB0b2RheUhhbmRsZTogZnVuY3Rpb24gdG9kYXlIYW5kbGUoKSB7CiAgICAgIHRoaXMuJGJ1cy5lbWl0KCdoYW5kbGVTdWNjZXNzJyk7CiAgICAgIHRoaXMuc2hvd1RvZGF5RGV0YWlsID0gZmFsc2U7CiAgICB9LAoKICAgIC8qKgogICAgICog5paw5bu65YWs5ZGKCiAgICAgKi8KICAgIGNyZWF0ZU5vdGljZTogZnVuY3Rpb24gY3JlYXRlTm90aWNlKCkgewogICAgICB0aGlzLmFubm91bmNlbWVudEFkZFNob3cgPSB0cnVlOwogICAgfSwKICAgIGFubm91bmNlbWVudFN1Ym1pdGVTdWNjZXNzOiBmdW5jdGlvbiBhbm5vdW5jZW1lbnRTdWJtaXRlU3VjY2VzcygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczMucmVmcmVzaExpc3QoKTsKCiAgICAgICAgX3RoaXMzLiRlbWl0KCd1cGRhdGUtY291bnQnKTsKICAgICAgfSwgMTAwMCk7CiAgICB9LAoKICAgIC8qKgogICAgICog6Lqr5L2TCiAgICAgKi8KCiAgICAvKioKICAgICAqIOiPnOWNleeCueWHuwogICAgICovCiAgICBtZW51Q2xpY2s6IGZ1bmN0aW9uIG1lbnVDbGljayhsYWJlbCkgewogICAgICB0aGlzLm1lbnVMYWJlbCA9IGxhYmVsOwogICAgICB0aGlzLnJlZnJlc2hMaXN0KCk7CiAgICB9LAoKICAgIC8qKgogICAgICog5Yi35paw5YiX6KGoCiAgICAgKi8KICAgIHJlZnJlc2hMaXN0OiBmdW5jdGlvbiByZWZyZXNoTGlzdCgpIHsKICAgICAgdGhpcy5wYWdlID0gMTsKICAgICAgdGhpcy5saXN0ID0gW107CiAgICAgIHRoaXMubm9Nb3JlID0gZmFsc2U7CiAgICAgIHRoaXMuc2Nyb2xsS2V5ID0gRGF0ZS5ub3coKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiDojrflj5bliJfooagKICAgICAqLwogICAgZ2V0TGlzdDogZnVuY3Rpb24gZ2V0TGlzdCgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHBhcmFtcyA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IDE1LAogICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsVmFsdWUKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLmlzVW5SZWFkKSB7CiAgICAgICAgcGFyYW1zLmlzUmVhZCA9IDA7CiAgICAgIH0gLy8gc3lzdGVtTWVzc2FnZUxpc3RBUEkocGFyYW1zKQogICAgICAvLyAgIC50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAvLyAgICAgaWYgKHRoaXMubGFiZWxWYWx1ZSA9PSBwYXJhbXMubGFiZWwpIHsKICAgICAgLy8gICAgICAgaWYgKCF0aGlzLm5vTW9yZSkgewogICAgICAvLyAgICAgICAgIGlmICh0aGlzLnBhZ2UgPT0gMSkgewogICAgICAvLyAgICAgICAgICAgdGhpcy5saXN0ID0gcmVzLmRhdGEubGlzdAogICAgICAvLyAgICAgICAgIH0gZWxzZSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmxpc3QuY29uY2F0KHJlcy5kYXRhLmxpc3QpCiAgICAgIC8vICAgICAgICAgfQogICAgICAvLyAgICAgICAgIHRoaXMucGFnZSsrCiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICAgICAgdGhpcy5ub01vcmUgPSByZXMuZGF0YS5sYXN0UGFnZQogICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgLy8gICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpCiAgICAgIC8vICAgICB9CiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goKCkgPT4gewogICAgICAvLyAgICAgdGhpcy5ub01vcmUgPSB0cnVlCiAgICAgIC8vICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZQogICAgICAvLyAgIH0pCgogICAgfSwKCiAgICAvKioKICAgICAqIOafpeeci+ivpuaDhQogICAgICovCiAgICBjaGVja0NSTURldGFpbDogZnVuY3Rpb24gY2hlY2tDUk1EZXRhaWwodHlwZSwgaWQsIGRhdGFJbmRleCwgZGF0YSkgewogICAgICBpZiAodHlwZSA9PT0gJ3NjaGVkdWxlJykgewogICAgICAgIHRoaXMucmVsYXRpb25JRCA9IGlkOwoKICAgICAgICBpZiAoZGF0YS5jb250ZW50KSB7CiAgICAgICAgICB0aGlzLnRvZGF5RGV0YWlsRGF0YSA9IEpTT04ucGFyc2UoZGF0YS5jb250ZW50KTsKICAgICAgICB9CgogICAgICAgIHRoaXMuc2hvd1RvZGF5RGV0YWlsID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlbGF0aW9uSUQgPSBpZDsKICAgICAgICB0aGlzLnJlbGF0aW9uQ3JtVHlwZSA9IHR5cGU7CiAgICAgICAgdGhpcy5zaG93RnVsbERldGFpbCA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiDkuIvovb3plJnor6/mlbDmja4KICAgICAqLwogICAgZG93bmxvYWRFcnJvcjogZnVuY3Rpb24gZG93bmxvYWRFcnJvcihtZXNzYWdlSWQpIHsvLyBjcm1Eb3duSW1wb3J0RXJyb3JBUEkoeyBtZXNzYWdlSWQgfSkKICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgZG93bmxvYWRFeGNlbFdpdGhSZXNEYXRhKHJlcykKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgICAgIC8vICAgfSkKICAgIH0sCgogICAgLyoqCiAgICAgKiDor7vlj5bmtojmga8KICAgICAqLwogICAgcmVhZE1lc3NhZ2VDbGljazogZnVuY3Rpb24gcmVhZE1lc3NhZ2VDbGljayhtZXNzYWdlSWQsIGluZGV4KSB7Ly8gc3lzdGVtTWVzc2FnZVJlYWRBUEkoeyBtZXNzYWdlSWQgfSkKICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgdGhpcy5saXN0W2luZGV4XS5pc1JlYWQgPSAxCiAgICAgIC8vICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtY291bnQnKQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKCgpID0+IHsKICAgICAgLy8gICB9KQogICAgfSwKICAgIGRlbGV0ZU1lc3NhZ2VDbGljazogZnVuY3Rpb24gZGVsZXRlTWVzc2FnZUNsaWNrKG1lc3NhZ2VJZCwgaW5kZXgpIHsvLyB0aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTov5nmnaHmtojmga8/JywgJ+aPkOekuicsIHsKICAgICAgLy8gICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgIC8vICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgIC8vICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIC8vIH0pCiAgICAgIC8vICAgLnRoZW4oKCkgPT4gewogICAgICAvLyAgICAgc3lzdGVtTWVzc2FnZURlbGV0ZUJ5SWRBUEkobWVzc2FnZUlkKQogICAgICAvLyAgICAgICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgICAgIHRoaXMubGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIC8vICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlLWNvdW50JykKICAgICAgLy8gICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpCiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgICAgIC5jYXRjaCgoKSA9PiB7fSkKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgLy8gICAgICAgdHlwZTogJ2luZm8nLAogICAgICAvLyAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2cJwogICAgICAvLyAgICAgfSkKICAgICAgLy8gICB9KQogICAgfSwKICAgIGhhbmRsZUNvbW1hbmQ6IGZ1bmN0aW9uIGhhbmRsZUNvbW1hbmQoYWN0aW9uKSB7CiAgICAgIGlmIChhY3Rpb24gPT09ICdkZWxldGUnKSB7CiAgICAgICAgdGhpcy5hbGxEZWxldGVDbGljaygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWxsTWFya0RvbmVDbGljaygpOwogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICog5YWo6YOo5qCH6K6w5a6M5oiQCiAgICAgKi8KICAgIGFsbE1hcmtEb25lQ2xpY2s6IGZ1bmN0aW9uIGFsbE1hcmtEb25lQ2xpY2soKSB7Ly8gc3lzdGVtTWVzc2FnZVJlYWRBbGxBUEkoewogICAgICAvLyAgIGxhYmVsOiB0aGlzLmxhYmVsVmFsdWUKICAgICAgLy8gfSkKICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgdGhpcy5saXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgIC8vICAgICAgIGl0ZW0uaXNSZWFkID0gMQogICAgICAvLyAgICAgfSkKICAgICAgLy8gICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZS1jb3VudCcpCiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goKCkgPT4gewogICAgICAvLyAgIH0pCiAgICB9LAoKICAgIC8qKgogICAgICog5YWo6YOo5Yig6ZmkCiAgICAgKi8KICAgIGFsbERlbGV0ZUNsaWNrOiBmdW5jdGlvbiBhbGxEZWxldGVDbGljaygpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudE1lbnUpIHsKICAgICAgICB2YXIgbmFtZSA9IHRoaXMuY3VycmVudE1lbnUubGFiZWwgPT0gJ2FsbCcgPyAnJyA6IHRoaXMuY3VycmVudE1lbnUubmFtZTsgLy8gdGhpcy4kY29uZmlybShg56Gu5a6a5Yig6Zmk5YWo6YOoJHtuYW1lfeW3suivu+a2iOaBrz9gLCAn5o+Q56S6JywgewogICAgICAgIC8vICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgIC8vICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgICAgLy8gICB0eXBlOiAnd2FybmluZycKICAgICAgICAvLyB9KQogICAgICAgIC8vICAgLnRoZW4oKCkgPT4gewogICAgICAgIC8vICAgICBzeXN0ZW1NZXNzYWdlQ2xlYXJBUEkoewogICAgICAgIC8vICAgICAgIGxhYmVsOiB0aGlzLmxhYmVsVmFsdWUKICAgICAgICAvLyAgICAgfSkKICAgICAgICAvLyAgICAgICAudGhlbihyZXMgPT4gewogICAgICAgIC8vICAgICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpCiAgICAgICAgLy8gICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtY291bnQnKQogICAgICAgIC8vICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfmk43kvZzmiJDlip8nKQogICAgICAgIC8vICAgICAgIH0pCiAgICAgICAgLy8gICAgICAgLmNhdGNoKCgpID0+IHt9KQogICAgICAgIC8vICAgfSkKICAgICAgICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgICAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgIC8vICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAvLyAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2cJwogICAgICAgIC8vICAgICB9KQogICAgICAgIC8vICAgfSkKICAgICAgfQogICAgfSwKICAgIGhpZGRlblZpZXc6IGZ1bmN0aW9uIGhpZGRlblZpZXcoKSB7CiAgICAgIHRoaXMuc2hvd0RldGFpbCA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZURvY3VtZW50Q2xpY2s6IGZ1bmN0aW9uIGhhbmRsZURvY3VtZW50Q2xpY2soZSkgewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwoKICAgICAgaWYgKHRoaXMuJGVsID09IGUudGFyZ2V0KSB7CiAgICAgICAgdGhpcy5zaG93RGV0YWlsID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9Cn07CmV4cG9ydHMuZGVmYXVsdCA9IF9kZWZhdWx0Ow=="},{"version":3,"sources":["SystemMessage.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div\n    v-show=\"visible\"\n    class=\"full-container\"\n  >\n    <!-- <slide-view\n      v-if=\"showDetail\"\n      :show-close=\"false\"\n      :no-listener-class=\"['bell-message-hook']\"\n      class=\"d-view\"\n      @close=\"hiddenView\"\n    >\n      <div class=\"sm-main\">\n        <div class=\"sm-main__hd\">\n          <span class=\"title\">{{ title }}</span>\n          <el-button\n            v-if=\"permissionSave && onlyAnnouncement\"\n            icon=\"el-icon-plus\"\n            class=\"notice-btn\"\n            type=\"text\"\n            @click=\"createNotice\"\n          >新建公告</el-button>\n        </div>\n\n        <flexbox\n          v-if=\"!onlyAnnouncement\"\n          class=\"menu\"\n          wrap=\"wrap\"\n        >\n          <el-badge\n            v-for=\"(item, index) in menuList\"\n            :key=\"index\"\n            :value=\"unreadNums[item.countKey]\"\n            :hidden=\"!unreadNums[item.countKey] || unreadNums[item.countKey] == 0\"\n            :max=\"99\"\n          >\n            <el-button\n              :class=\"{'is-current': menuLabel == item.label}\"\n              type=\"primary\"\n              @click.native=\"menuClick(item.label)\"\n            >{{ item.name }}</el-button>\n          </el-badge>\n        </flexbox>\n\n        <div\n          :style=\"{ height: contentHeight }\"\n          class=\"sm-main__bd\"\n        >\n          <div\n            :key=\"scrollKey\"\n            v-infinite-scroll=\"getList\"\n            infinite-scroll-distance=\"100\"\n            infinite-scroll-disabled=\"scrollDisabled\"\n          >\n            <message-cell\n              v-for=\"(item, index) in list\"\n              :key=\"index\"\n              :data=\"item\"\n              :data-index=\"index\"\n              @detail=\"checkCRMDetail\"\n              @download=\"downloadError\"\n              @read=\"readMessageClick\"\n              @delete=\"deleteMessageClick\"\n            />\n          </div>\n          <p\n            v-if=\"loading\"\n            class=\"scroll-bottom-tips\"\n          >加载中...</p>\n          <p\n            v-if=\"noMore\"\n            class=\"scroll-bottom-tips\"\n          >没有更多了</p>\n        </div>\n\n        <flexbox class=\"sm-main__ft\">\n          <div class=\"switch-read\">\n            <el-switch\n              v-model=\"isUnRead\"\n              @change=\"refreshList\"\n            />\n            <span class=\"switch-read__title\">仅显示未读消息</span>\n          </div>\n          <el-dropdown\n            trigger=\"click\"\n            @command=\"handleCommand\"\n          >\n            <i\n              class=\"el-icon-more more\"\n            />\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item\n                icon=\"el-icon-check\"\n                command=\"read\"\n              >{{ `全部${currentMenu.label == 'all' ? '' : currentMenu.name}标记为已读` }}</el-dropdown-item>\n              <el-dropdown-item\n                icon=\"wk wk-s-delete\"\n                command=\"delete\"\n              >{{ `删除${currentMenu.name}已读消息` }}</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </flexbox>\n      </div>\n    </slide-view> -->\n\n    <!-- CRM详情 -->\n    <!-- <c-r-m-full-screen-detail\n      :id=\"relationID\"\n      :visible.sync=\"showFullDetail\"\n      :crm-type=\"relationCrmType\"\n    /> -->\n\n    <!-- <today-list-detail\n      :id=\"relationID\"\n      :show-today-detail=\"showTodayDetail\"\n      :today-detail-data=\"todayDetailData\"\n      @deleteSuccess=\"todayHandle\"\n      @createSuccess=\"todayHandle\"\n      @close=\"showTodayDetail = false\"/> -->\n  </div>\n</template>\n\n<script>\n// import {\n//   systemMessageListAPI,\n//   systemMessageReadAPI,\n//   systemMessageReadAllAPI,\n//   systemMessageClearAPI,\n//   systemMessageDeleteByIdAPI } from '@/api/common'\n// import {\n//   crmDownImportErrorAPI\n// } from '@/api/crm/common'\n// import SlideView from '@/components/SlideView'\nimport MessageCell from './MessageCell'\n\nimport { getMaxIndex, downloadExcelWithResData } from '@/utils/index'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  // 导航头部系统消息\n  name: 'SystemMessage',\n  components: {\n    // SlideView,\n    MessageCell\n    // CRMFullScreenDetail: () =>\n    //   import('@/components/CRMFullScreenDetail')\n  },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    // 仅公告\n    onlyAnnouncement: {\n      type: Boolean,\n      default: false\n    },\n    unreadNums: Object\n  },\n  data() {\n    return {\n      showTodayDetail: false,\n      todayDetailData: {},\n      showDetail: false,\n      // 1 任务 2 日志 3 oa审批 4公告 5 日程 6 客户管理\n      menuLabel: 'all',\n\n      // 公告\n      announcementAddShow: false,\n\n      // 列表\n      list: [],\n      loading: false,\n      noMore: false,\n      scrollKey: Date.now(),\n      page: 1,\n      isUnRead: false, // 仅展示未读\n\n      // CRM详情\n      showFullDetail: false, // 查看相关客户管理详情\n      relationID: '', // 相关ID参数\n      relationCrmType: '' // 相关类型\n    }\n  },\n  computed: {\n    ...mapGetters(['oa', 'crm', 'project']),\n    permissionSave() {\n      return this.oa && this.oa.announcement && this.oa.announcement.save\n    },\n    title() {\n      if (this.onlyAnnouncement) {\n        return this.unreadNums.announceCount && this.unreadNums.announceCount > 0 ? `公告（${this.unreadNums.announceCount}）` : '公告'\n      }\n      return this.unreadNums.allCunt > 0 ? `通知（${this.unreadNums.allCunt}）` : '通知'\n    },\n\n    scrollDisabled() {\n      return this.loading || this.noMore\n    },\n\n    labelValue() {\n      if (this.onlyAnnouncement) {\n        return 4\n      }\n      return this.menuLabel == 'all' ? '' : this.menuLabel\n    },\n\n    contentHeight() {\n      if (this.menuList.length > 7) {\n        return 'calc(100% - 110px)'\n      }\n      return 'calc(100% - 155px)'\n    },\n\n    menuList() {\n      const menuList = [{\n        name: '全部',\n        label: 'all',\n        countKey: 'allCount'\n      }]\n\n      if (this.oa) {\n        // menuList.push({\n        //   name: '公告',\n        //   label: 4,\n        //   countKey: 'announceCount'\n        // })\n\n        if (this.oa.taskExamine) {\n          menuList.push({\n            name: '办公审批',\n            label: 3,\n            countKey: 'examineCount'\n          })\n        }\n      }\n\n      if ((this.oa && this.oa.taskExamine) || this.project) {\n        menuList.push({\n          name: '任务',\n          label: 1,\n          countKey: 'taskCount'\n        })\n      }\n\n      if (this.oa && this.oa.log) {\n        menuList.push({\n          name: '日志',\n          label: 2,\n          countKey: 'logCount'\n        })\n      }\n\n      if (this.crm) {\n        menuList.push({\n          name: '客户管理',\n          label: 6,\n          countKey: 'crmCount'\n        })\n      }\n\n      if (this.oa && this.oa.calendar) {\n        menuList.push({\n          name: '日程',\n          label: 5,\n          countKey: 'eventCount'\n        })\n      }\n\n      return menuList\n    },\n\n    currentMenu() {\n      return this.menuList.find(item => {\n        return item.label === this.menuLabel\n      })\n    }\n  },\n  watch: {\n    visible: {\n      handler(val) {\n        this.showDetail = val\n        if (val) {\n          this.$el.style.zIndex = getMaxIndex()\n          this.refreshList()\n        }\n      },\n      immediate: true\n    },\n    showDetail(val) {\n      if (!val) {\n        setTimeout(() => {\n          this.$emit('update:visible', false)\n        }, 350)\n      }\n    }\n  },\n  mounted() {\n    document.body.appendChild(this.$el)\n    this.$el.addEventListener('click', this.handleDocumentClick, false)\n  },\n\n  beforeDestroy() {\n    // remove DOM node after destroy\n    if (this.$el && this.$el.parentNode) {\n      this.$el.parentNode.removeChild(this.$el)\n      this.$el.removeEventListener('click', this.handleDocumentClick, false)\n    }\n  },\n  methods: {\n    /**\n     * 日程事件\n     */\n    todayHandle() {\n      this.$bus.emit('handleSuccess')\n      this.showTodayDetail = false\n    },\n\n    /**\n     * 新建公告\n     */\n    createNotice() {\n      this.announcementAddShow = true\n    },\n\n    announcementSubmiteSuccess() {\n      setTimeout(() => {\n        this.refreshList()\n        this.$emit('update-count')\n      }, 1000)\n    },\n\n    /**\n     * 身体\n     */\n\n    /**\n     * 菜单点击\n     */\n    menuClick(label) {\n      this.menuLabel = label\n      this.refreshList()\n    },\n\n    /**\n     * 刷新列表\n     */\n    refreshList() {\n      this.page = 1\n      this.list = []\n      this.noMore = false\n      this.scrollKey = Date.now()\n    },\n\n    /**\n     * 获取列表\n     */\n    getList() {\n      this.loading = true\n      const params = {\n        page: this.page,\n        limit: 15,\n        label: this.labelValue\n      }\n      if (this.isUnRead) {\n        params.isRead = 0\n      }\n      // systemMessageListAPI(params)\n      //   .then(res => {\n      //     this.loading = false\n      //     if (this.labelValue == params.label) {\n      //       if (!this.noMore) {\n      //         if (this.page == 1) {\n      //           this.list = res.data.list\n      //         } else {\n      //           this.list = this.list.concat(res.data.list)\n      //         }\n      //         this.page++\n      //       }\n      //       this.noMore = res.data.lastPage\n      //     } else {\n      //       this.refreshList()\n      //     }\n      //   })\n      //   .catch(() => {\n      //     this.noMore = true\n      //     this.loading = false\n      //   })\n    },\n\n    /**\n     * 查看详情\n     */\n    checkCRMDetail(type, id, dataIndex, data) {\n      if (type === 'schedule') {\n        this.relationID = id\n        if (data.content) {\n          this.todayDetailData = JSON.parse(data.content)\n        }\n        this.showTodayDetail = true\n      } else {\n        this.relationID = id\n        this.relationCrmType = type\n        this.showFullDetail = true\n      }\n    },\n\n    /**\n     * 下载错误数据\n     */\n    downloadError(messageId) {\n      // crmDownImportErrorAPI({ messageId })\n      //   .then(res => {\n      //     downloadExcelWithResData(res)\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n\n    /**\n     * 读取消息\n     */\n    readMessageClick(messageId, index) {\n      // systemMessageReadAPI({ messageId })\n      //   .then(res => {\n      //     this.list[index].isRead = 1\n      //     this.$emit('update-count')\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n\n    deleteMessageClick(messageId, index) {\n      // this.$confirm('确定删除这条消息?', '提示', {\n      //   confirmButtonText: '确定',\n      //   cancelButtonText: '取消',\n      //   type: 'warning'\n      // })\n      //   .then(() => {\n      //     systemMessageDeleteByIdAPI(messageId)\n      //       .then(res => {\n      //         this.list.splice(index, 1)\n      //         this.$emit('update-count')\n      //         this.$message.success('操作成功')\n      //       })\n      //       .catch(() => {})\n      //   })\n      //   .catch(() => {\n      //     this.$message({\n      //       type: 'info',\n      //       message: '已取消操作'\n      //     })\n      //   })\n    },\n\n    handleCommand(action) {\n      if (action === 'delete') {\n        this.allDeleteClick()\n      } else {\n        this.allMarkDoneClick()\n      }\n    },\n\n    /**\n     * 全部标记完成\n     */\n    allMarkDoneClick() {\n      // systemMessageReadAllAPI({\n      //   label: this.labelValue\n      // })\n      //   .then(res => {\n      //     this.list.forEach(item => {\n      //       item.isRead = 1\n      //     })\n      //     this.$emit('update-count')\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n\n    /**\n     * 全部删除\n     */\n    allDeleteClick() {\n      if (this.currentMenu) {\n        const name = this.currentMenu.label == 'all' ? '' : this.currentMenu.name\n        // this.$confirm(`确定删除全部${name}已读消息?`, '提示', {\n        //   confirmButtonText: '确定',\n        //   cancelButtonText: '取消',\n        //   type: 'warning'\n        // })\n        //   .then(() => {\n        //     systemMessageClearAPI({\n        //       label: this.labelValue\n        //     })\n        //       .then(res => {\n        //         this.refreshList()\n        //         this.$emit('update-count')\n        //         this.$message.success('操作成功')\n        //       })\n        //       .catch(() => {})\n        //   })\n        //   .catch(() => {\n        //     this.$message({\n        //       type: 'info',\n        //       message: '已取消操作'\n        //     })\n        //   })\n      }\n    },\n\n    hiddenView() {\n      this.showDetail = false\n    },\n\n    handleDocumentClick(e) {\n      e.stopPropagation()\n      if (this.$el == e.target) {\n        this.showDetail = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.full-container {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n  margin: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n\n.d-view {\n  position: fixed;\n  width: 530px;\n  top: 0px;\n  bottom: 0px;\n  right: 0px;\n  background-color: white;\n  ::v-deep .el-card__body {\n    height: 100%;\n  }\n}\n\n.sm-main {\n  height: 100%;\n  position: relative;\n\n  &__hd {\n    padding: 0 20px;\n    height: 50px;\n    line-height: 50px;\n    font-size: 14px;\n    color: #333;\n    background-color: #f7f8fa;\n\n    .title {\n      font-weight: 600;\n    }\n\n    .notice-btn {\n      float: right;\n      margin-top: 10px;\n    }\n  }\n\n  &__bd {\n    overflow-y: auto;\n  }\n\n  &__ft {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -1px;\n    height: 50px;\n    background-color: #f7f8fa;\n    padding: 0 15px;\n\n    .switch-read {\n      flex: 1;\n      &__title {\n        font-size: 13px;\n        margin-left: 10px;\n        color: #333;\n      }\n    }\n\n    .more {\n      flex-shrink: 0;\n      cursor: pointer;\n    }\n\n    .more:hover {\n      color: $xr-color-primary;\n    }\n  }\n}\n\n// 菜单\n.menu {\n  overflow-x: auto;\n  overflow-y: hidden;\n  padding-right: 15px;\n  margin-bottom: 15px;\n  // line-height: 60px;\n  border-top: 1px solid $xr-border-color-base;\n  // border-bottom: 1px solid $xr-border-color-base;\n\n  .el-button {\n    color: #666;\n    margin-left: 15px;\n    background-color: $xr--background-color-base;\n    border-color: $xr--background-color-base;\n    font-size: 12px;\n    height: 28px;\n    border-radius: 14px;\n    ::v-deep i {\n      font-size: 12px;\n      margin-right: 5px;\n    }\n  }\n\n  .el-button--primary.is-current,\n  .el-button--primary:hover {\n    background: $xr-color-primary;\n    border-color: $xr-color-primary;\n    color: #ffffff;\n  }\n\n  .el-badge {\n    margin-top: 15px;\n  }\n}\n\n.scroll-bottom-tips {\n  margin: 15px 0 65px;\n}\n\n.el-badge {\n  ::v-deep .el-badge__content.is-fixed {\n    z-index: 2;\n  }\n}\n</style>\n"],"sourceRoot":"src/layout/components"}]}