{"remainingRequest":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js!/Users/caichaosen/Code/web/hrm-ui2/node_modules/eslint-loader/index.js??ref--13-0!/Users/caichaosen/Code/web/hrm-ui2/src/utils/request.js","dependencies":[{"path":"/Users/caichaosen/Code/web/hrm-ui2/src/utils/request.js","mtime":1611827204191},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvY2FpY2hhb3Nlbi9Db2RlL3dlYi9ocm0tdWkyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2ludGVyb3BSZXF1aXJlRGVmYXVsdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YuanMiKTsKCnJlcXVpcmUoImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIik7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIik7CgpPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7CiAgdmFsdWU6IHRydWUKfSk7CmV4cG9ydHMuZGVmYXVsdCA9IHZvaWQgMDsKCnZhciBfYXhpb3MgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoImF4aW9zIikpOwoKdmFyIF9lbGVtZW50VWkgPSByZXF1aXJlKCJlbGVtZW50LXVpIik7Cgp2YXIgX3N0b3JlID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCJAL3N0b3JlIikpOwoKdmFyIF9hdXRoID0gcmVxdWlyZSgiQC91dGlscy9hdXRoIik7Cgp2YXIgX2Vycm9yQ29kZSA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiQC91dGlscy9lcnJvckNvZGUiKSk7CgpfYXhpb3MuZGVmYXVsdC5kZWZhdWx0cy5oZWFkZXJzWydDb250ZW50LVR5cGUnXSA9ICdhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9dXRmLTgnOyAvLyDliJvlu7pheGlvc+WunuS+iwoKdmFyIHNlcnZpY2UgPSBfYXhpb3MuZGVmYXVsdC5jcmVhdGUoewogIC8vIGF4aW9z5Lit6K+35rGC6YWN572u5pyJYmFzZVVSTOmAiemhue+8jOihqOekuuivt+axglVSTOWFrOWFsemDqOWIhgogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUEksCiAgLy8g6LaF5pe2CiAgdGltZW91dDogMTAwMDAKfSk7CgppZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2xhbmcnKSAmJiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnbGFuZycpID09PSAnRU4nKSB7CiAgX2F4aW9zLmRlZmF1bHQuZGVmYXVsdHMuaGVhZGVyc1snQWNjZXB0LUxhbmd1YWdlJ10gPSAnRU4nOwp9IGVsc2UgewogIF9heGlvcy5kZWZhdWx0LmRlZmF1bHRzLmhlYWRlcnNbJ0FjY2VwdC1MYW5ndWFnZSddID0gJ0NOJzsKfSAvLyByZXF1ZXN05oum5oiq5ZmoCgoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIC8vIOaYr+WQpumcgOimgeiuvue9riB0b2tlbi0KICB2YXIgaXNUb2tlbiA9IChjb25maWcuaGVhZGVycyB8fCB7fSkuaXNUb2tlbiA9PT0gZmFsc2U7CgogIGlmICgoMCwgX2F1dGguZ2V0VG9rZW4pKCkgJiYgIWlzVG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSAnQmVhcmVyICcgKyAoMCwgX2F1dGguZ2V0VG9rZW4pKCk7IC8vIOiuqeavj+S4quivt+axguaQuuW4puiHquWumuS5iXRva2VuIOivt+agueaNruWunumZheaDheWGteiHquihjOS/ruaUuQogIH0gLy8gc2V0IGNvbGxlZ2Uvc2NwIHVybAoKCiAgaWYgKGNvbmZpZy51cmwuaW5kZXhPZignY29sbGVnZS9zY3AnKSA+IC0xICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnZGV2ZWxvcG1lbnQnKSB7CiAgICBjb25maWcuYmFzZVVSTCA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9TQ1BfQVBJOwogIH0KCiAgcmV0dXJuIGNvbmZpZzsKfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coZXJyb3IpOwogIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7IC8vIOWTjeW6lOaLpuaIquWZqAoKc2VydmljZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICAvLyDmnKrorr7nva7nirbmgIHnoIHliJnpu5jorqTmiJDlip/nirbmgIEKICB2YXIgY29kZSA9IHJlcy5kYXRhLmNvZGUgfHwgMjAwOyAvLyDojrflj5bplJnor6/kv6Hmga8KCiAgdmFyIG1zZyA9IF9lcnJvckNvZGUuZGVmYXVsdFtjb2RlXSB8fCByZXMuZGF0YS5tc2cgfHwgX2Vycm9yQ29kZS5kZWZhdWx0WydkZWZhdWx0J107CgogIGlmIChjb2RlID09PSA0MDEpIHsKICAgIF9lbGVtZW50VWkuTWVzc2FnZUJveC5jb25maXJtKCfnmbvlvZXnirbmgIHlt7Lov4fmnJ/vvIzmgqjlj6/ku6Xnu6fnu63nlZnlnKjor6XpobXpnaLvvIzmiJbogIXph43mlrDnmbvlvZUnLCAn57O757uf5o+Q56S6JywgewogICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+mHjeaWsOeZu+W9lScsCiAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLAogICAgICB0eXBlOiAnd2FybmluZycKICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICBfc3RvcmUuZGVmYXVsdC5kaXNwYXRjaCgnTG9nT3V0JykudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgbG9jYXRpb24uaHJlZiA9ICcvaW5kZXgnOwogICAgICB9KTsKICAgIH0pOwogIH0gZWxzZSBpZiAoY29kZSA9PT0gNTAwKSB7CiAgICAoMCwgX2VsZW1lbnRVaS5NZXNzYWdlKSh7CiAgICAgIG1lc3NhZ2U6IG1zZywKICAgICAgdHlwZTogJ2Vycm9yJwogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKG1zZykpOwogIH0gZWxzZSBpZiAoY29kZSAhPT0gMjAwKSB7CiAgICBfZWxlbWVudFVpLk5vdGlmaWNhdGlvbi5lcnJvcih7CiAgICAgIHRpdGxlOiBtc2cKICAgIH0pOwoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnZXJyb3InKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ2VycicgKyBlcnJvcik7CiAgdmFyIG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlOwoKICBpZiAobWVzc2FnZSA9PT0gJ05ldHdvcmsgRXJyb3InKSB7CiAgICBtZXNzYWdlID0gJ+WQjuerr+aOpeWPo+i/nuaOpeW8guW4uCc7CiAgfSBlbHNlIGlmIChtZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHsKICAgIG1lc3NhZ2UgPSAn57O757uf5o6l5Y+j6K+35rGC6LaF5pe2JzsKICB9IGVsc2UgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzIGNvZGUnKSkgewogICAgbWVzc2FnZSA9ICfns7vnu5/mjqXlj6MnICsgbWVzc2FnZS5zdWJzdHIobWVzc2FnZS5sZW5ndGggLSAzKSArICflvILluLgnOwogIH0KCiAgKDAsIF9lbGVtZW50VWkuTWVzc2FnZSkoewogICAgbWVzc2FnZTogbWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsKdmFyIF9kZWZhdWx0ID0gc2VydmljZTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"sources":["/Users/caichaosen/Code/web/hrm-ui2/src/utils/request.js"],"names":["axios","defaults","headers","service","create","baseURL","process","env","VUE_APP_BASE_API","timeout","localStorage","getItem","interceptors","request","use","config","isToken","url","indexOf","NODE_ENV","VUE_APP_BASE_SCP_API","error","console","log","Promise","reject","response","res","code","data","msg","errorCode","MessageBox","confirm","confirmButtonText","cancelButtonText","type","then","store","dispatch","location","href","message","Error","Notification","title","includes","substr","length","duration"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { Notification, MessageBox, Message } from 'element-ui'\nimport store from '@/store'\nimport { getToken } from '@/utils/auth'\nimport errorCode from '@/utils/errorCode'\n\naxios.defaults.headers['Content-Type'] = 'application/json;charset=utf-8'\n// 创建axios实例\nconst service = axios.create({\n  // axios中请求配置有baseURL选项，表示请求URL公共部分\n  baseURL: process.env.VUE_APP_BASE_API,\n  // 超时\n  timeout: 10000\n})\nif (localStorage.getItem('lang') && localStorage.getItem('lang') === 'EN') {\n  axios.defaults.headers['Accept-Language'] = 'EN'\n} else {\n  axios.defaults.headers['Accept-Language'] = 'CN'\n}\n// request拦截器\nservice.interceptors.request.use(config => {\n  // 是否需要设置 token-\n  const isToken = (config.headers || {}).isToken === false\n  if (getToken() && !isToken) {\n    config.headers['Authorization'] = 'Bearer ' + getToken() // 让每个请求携带自定义token 请根据实际情况自行修改\n  }\n  // set college/scp url\n  if (config.url.indexOf('college/scp') > -1 && process.env.NODE_ENV !== 'development') {\n    config.baseURL = process.env.VUE_APP_BASE_SCP_API\n  }\n  return config\n}, error => {\n  console.log(error)\n  Promise.reject(error)\n})\n\n// 响应拦截器\nservice.interceptors.response.use(res => {\n  // 未设置状态码则默认成功状态\n  const code = res.data.code || 200\n  // 获取错误信息\n  const msg = errorCode[code] || res.data.msg || errorCode['default']\n  if (code === 401) {\n    MessageBox.confirm('登录状态已过期，您可以继续留在该页面，或者重新登录', '系统提示', {\n      confirmButtonText: '重新登录',\n      cancelButtonText: '取消',\n      type: 'warning'\n    }\n    ).then(() => {\n      store.dispatch('LogOut').then(() => {\n        location.href = '/index'\n      })\n    })\n  } else if (code === 500) {\n    Message({\n      message: msg,\n      type: 'error'\n    })\n    return Promise.reject(new Error(msg))\n  } else if (code !== 200) {\n    Notification.error({\n      title: msg\n    })\n    return Promise.reject('error')\n  } else {\n    return res.data\n  }\n},\nerror => {\n  console.log('err' + error)\n  let { message } = error\n  if (message === 'Network Error') {\n    message = '后端接口连接异常'\n  } else if (message.includes('timeout')) {\n    message = '系统接口请求超时'\n  } else if (message.includes('Request failed with status code')) {\n    message = '系统接口' + message.substr(message.length - 3) + '异常'\n  }\n  Message({\n    message: message,\n    type: 'error',\n    duration: 5 * 1000\n  })\n  return Promise.reject(error)\n}\n)\n\nexport default service\n"]}]}