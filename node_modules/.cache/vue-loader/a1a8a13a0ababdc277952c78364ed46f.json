{"remainingRequest":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/caichaosen/Code/web/hrm-ui2/src/layout/components/SystemMessage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/caichaosen/Code/web/hrm-ui2/src/layout/components/SystemMessage.vue","mtime":1612489481008},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIGltcG9ydCB7Ci8vICAgc3lzdGVtTWVzc2FnZUxpc3RBUEksCi8vICAgc3lzdGVtTWVzc2FnZVJlYWRBUEksCi8vICAgc3lzdGVtTWVzc2FnZVJlYWRBbGxBUEksCi8vICAgc3lzdGVtTWVzc2FnZUNsZWFyQVBJLAovLyAgIHN5c3RlbU1lc3NhZ2VEZWxldGVCeUlkQVBJIH0gZnJvbSAnQC9hcGkvY29tbW9uJwovLyBpbXBvcnQgewovLyAgIGNybURvd25JbXBvcnRFcnJvckFQSQovLyB9IGZyb20gJ0AvYXBpL2NybS9jb21tb24nCi8vIGltcG9ydCBTbGlkZVZpZXcgZnJvbSAnQC9jb21wb25lbnRzL1NsaWRlVmlldycKaW1wb3J0IE1lc3NhZ2VDZWxsIGZyb20gJy4vTWVzc2FnZUNlbGwnCgppbXBvcnQgeyBnZXRNYXhJbmRleCwgZG93bmxvYWRFeGNlbFdpdGhSZXNEYXRhIH0gZnJvbSAnQC91dGlscy9pbmRleCcKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnCgpleHBvcnQgZGVmYXVsdCB7CiAgLy8g5a+86Iiq5aS06YOo57O757uf5raI5oGvCiAgbmFtZTogJ1N5c3RlbU1lc3NhZ2UnLAogIGNvbXBvbmVudHM6IHsKICAgIC8vIFNsaWRlVmlldywKICAgIE1lc3NhZ2VDZWxsCiAgICAvLyBDUk1GdWxsU2NyZWVuRGV0YWlsOiAoKSA9PgogICAgLy8gICBpbXBvcnQoJ0AvY29tcG9uZW50cy9DUk1GdWxsU2NyZWVuRGV0YWlsJykKICB9LAogIHByb3BzOiB7CiAgICB2aXNpYmxlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLy8g5LuF5YWs5ZGKCiAgICBvbmx5QW5ub3VuY2VtZW50OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgdW5yZWFkTnVtczogT2JqZWN0CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1RvZGF5RGV0YWlsOiBmYWxzZSwKICAgICAgdG9kYXlEZXRhaWxEYXRhOiB7fSwKICAgICAgc2hvd0RldGFpbDogZmFsc2UsCiAgICAgIC8vIDEg5Lu75YqhIDIg5pel5b+XIDMgb2HlrqHmibkgNOWFrOWRiiA1IOaXpeeoiyA2IOWuouaIt+euoeeQhgogICAgICBtZW51TGFiZWw6ICdhbGwnLAoKICAgICAgLy8g5YWs5ZGKCiAgICAgIGFubm91bmNlbWVudEFkZFNob3c6IGZhbHNlLAoKICAgICAgLy8g5YiX6KGoCiAgICAgIGxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbm9Nb3JlOiBmYWxzZSwKICAgICAgc2Nyb2xsS2V5OiBEYXRlLm5vdygpLAogICAgICBwYWdlOiAxLAogICAgICBpc1VuUmVhZDogZmFsc2UsIC8vIOS7heWxleekuuacquivuwoKICAgICAgLy8gQ1JN6K+m5oOFCiAgICAgIHNob3dGdWxsRGV0YWlsOiBmYWxzZSwgLy8g5p+l55yL55u45YWz5a6i5oi3566h55CG6K+m5oOFCiAgICAgIHJlbGF0aW9uSUQ6ICcnLCAvLyDnm7jlhbNJROWPguaVsAogICAgICByZWxhdGlvbkNybVR5cGU6ICcnIC8vIOebuOWFs+exu+WeiwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydvYScsICdjcm0nLCAncHJvamVjdCddKSwKICAgIHBlcm1pc3Npb25TYXZlKCkgewogICAgICByZXR1cm4gdGhpcy5vYSAmJiB0aGlzLm9hLmFubm91bmNlbWVudCAmJiB0aGlzLm9hLmFubm91bmNlbWVudC5zYXZlCiAgICB9LAogICAgdGl0bGUoKSB7CiAgICAgIGlmICh0aGlzLm9ubHlBbm5vdW5jZW1lbnQpIHsKICAgICAgICByZXR1cm4gdGhpcy51bnJlYWROdW1zLmFubm91bmNlQ291bnQgJiYgdGhpcy51bnJlYWROdW1zLmFubm91bmNlQ291bnQgPiAwID8gYOWFrOWRiu+8iCR7dGhpcy51bnJlYWROdW1zLmFubm91bmNlQ291bnR977yJYCA6ICflhazlkYonCiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMudW5yZWFkTnVtcy5hbGxDdW50ID4gMCA/IGDpgJrnn6XvvIgke3RoaXMudW5yZWFkTnVtcy5hbGxDdW50fe+8iWAgOiAn6YCa55+lJwogICAgfSwKCiAgICBzY3JvbGxEaXNhYmxlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMubG9hZGluZyB8fCB0aGlzLm5vTW9yZQogICAgfSwKCiAgICBsYWJlbFZhbHVlKCkgewogICAgICBpZiAodGhpcy5vbmx5QW5ub3VuY2VtZW50KSB7CiAgICAgICAgcmV0dXJuIDQKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5tZW51TGFiZWwgPT0gJ2FsbCcgPyAnJyA6IHRoaXMubWVudUxhYmVsCiAgICB9LAoKICAgIGNvbnRlbnRIZWlnaHQoKSB7CiAgICAgIGlmICh0aGlzLm1lbnVMaXN0Lmxlbmd0aCA+IDcpIHsKICAgICAgICByZXR1cm4gJ2NhbGMoMTAwJSAtIDExMHB4KScKICAgICAgfQogICAgICByZXR1cm4gJ2NhbGMoMTAwJSAtIDE1NXB4KScKICAgIH0sCgogICAgbWVudUxpc3QoKSB7CiAgICAgIGNvbnN0IG1lbnVMaXN0ID0gW3sKICAgICAgICBuYW1lOiAn5YWo6YOoJywKICAgICAgICBsYWJlbDogJ2FsbCcsCiAgICAgICAgY291bnRLZXk6ICdhbGxDb3VudCcKICAgICAgfV0KCiAgICAgIGlmICh0aGlzLm9hKSB7CiAgICAgICAgLy8gbWVudUxpc3QucHVzaCh7CiAgICAgICAgLy8gICBuYW1lOiAn5YWs5ZGKJywKICAgICAgICAvLyAgIGxhYmVsOiA0LAogICAgICAgIC8vICAgY291bnRLZXk6ICdhbm5vdW5jZUNvdW50JwogICAgICAgIC8vIH0pCgogICAgICAgIGlmICh0aGlzLm9hLnRhc2tFeGFtaW5lKSB7CiAgICAgICAgICBtZW51TGlzdC5wdXNoKHsKICAgICAgICAgICAgbmFtZTogJ+WKnuWFrOWuoeaJuScsCiAgICAgICAgICAgIGxhYmVsOiAzLAogICAgICAgICAgICBjb3VudEtleTogJ2V4YW1pbmVDb3VudCcKICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoKHRoaXMub2EgJiYgdGhpcy5vYS50YXNrRXhhbWluZSkgfHwgdGhpcy5wcm9qZWN0KSB7CiAgICAgICAgbWVudUxpc3QucHVzaCh7CiAgICAgICAgICBuYW1lOiAn5Lu75YqhJywKICAgICAgICAgIGxhYmVsOiAxLAogICAgICAgICAgY291bnRLZXk6ICd0YXNrQ291bnQnCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgaWYgKHRoaXMub2EgJiYgdGhpcy5vYS5sb2cpIHsKICAgICAgICBtZW51TGlzdC5wdXNoKHsKICAgICAgICAgIG5hbWU6ICfml6Xlv5cnLAogICAgICAgICAgbGFiZWw6IDIsCiAgICAgICAgICBjb3VudEtleTogJ2xvZ0NvdW50JwogICAgICAgIH0pCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmNybSkgewogICAgICAgIG1lbnVMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogJ+WuouaIt+euoeeQhicsCiAgICAgICAgICBsYWJlbDogNiwKICAgICAgICAgIGNvdW50S2V5OiAnY3JtQ291bnQnCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgaWYgKHRoaXMub2EgJiYgdGhpcy5vYS5jYWxlbmRhcikgewogICAgICAgIG1lbnVMaXN0LnB1c2goewogICAgICAgICAgbmFtZTogJ+aXpeeoiycsCiAgICAgICAgICBsYWJlbDogNSwKICAgICAgICAgIGNvdW50S2V5OiAnZXZlbnRDb3VudCcKICAgICAgICB9KQogICAgICB9CgogICAgICByZXR1cm4gbWVudUxpc3QKICAgIH0sCgogICAgY3VycmVudE1lbnUoKSB7CiAgICAgIHJldHVybiB0aGlzLm1lbnVMaXN0LmZpbmQoaXRlbSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubGFiZWwgPT09IHRoaXMubWVudUxhYmVsCiAgICAgIH0pCiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmlzaWJsZTogewogICAgICBoYW5kbGVyKHZhbCkgewogICAgICAgIHRoaXMuc2hvd0RldGFpbCA9IHZhbAogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgIHRoaXMuJGVsLnN0eWxlLnpJbmRleCA9IGdldE1heEluZGV4KCkKICAgICAgICAgIHRoaXMucmVmcmVzaExpc3QoKQogICAgICAgIH0KICAgICAgfSwKICAgICAgaW1tZWRpYXRlOiB0cnVlCiAgICB9LAogICAgc2hvd0RldGFpbCh2YWwpIHsKICAgICAgaWYgKCF2YWwpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZTp2aXNpYmxlJywgZmFsc2UpCiAgICAgICAgfSwgMzUwKQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCh0aGlzLiRlbCkKICAgIHRoaXMuJGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrLCBmYWxzZSkKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgLy8gcmVtb3ZlIERPTSBub2RlIGFmdGVyIGRlc3Ryb3kKICAgIGlmICh0aGlzLiRlbCAmJiB0aGlzLiRlbC5wYXJlbnROb2RlKSB7CiAgICAgIHRoaXMuJGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy4kZWwpCiAgICAgIHRoaXMuJGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVEb2N1bWVudENsaWNrLCBmYWxzZSkKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICog5pel56iL5LqL5Lu2CiAgICAgKi8KICAgIHRvZGF5SGFuZGxlKCkgewogICAgICB0aGlzLiRidXMuZW1pdCgnaGFuZGxlU3VjY2VzcycpCiAgICAgIHRoaXMuc2hvd1RvZGF5RGV0YWlsID0gZmFsc2UKICAgIH0sCgogICAgLyoqCiAgICAgKiDmlrDlu7rlhazlkYoKICAgICAqLwogICAgY3JlYXRlTm90aWNlKCkgewogICAgICB0aGlzLmFubm91bmNlbWVudEFkZFNob3cgPSB0cnVlCiAgICB9LAoKICAgIGFubm91bmNlbWVudFN1Ym1pdGVTdWNjZXNzKCkgewogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCkKICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtY291bnQnKQogICAgICB9LCAxMDAwKQogICAgfSwKCiAgICAvKioKICAgICAqIOi6q+S9kwogICAgICovCgogICAgLyoqCiAgICAgKiDoj5zljZXngrnlh7sKICAgICAqLwogICAgbWVudUNsaWNrKGxhYmVsKSB7CiAgICAgIHRoaXMubWVudUxhYmVsID0gbGFiZWwKICAgICAgdGhpcy5yZWZyZXNoTGlzdCgpCiAgICB9LAoKICAgIC8qKgogICAgICog5Yi35paw5YiX6KGoCiAgICAgKi8KICAgIHJlZnJlc2hMaXN0KCkgewogICAgICB0aGlzLnBhZ2UgPSAxCiAgICAgIHRoaXMubGlzdCA9IFtdCiAgICAgIHRoaXMubm9Nb3JlID0gZmFsc2UKICAgICAgdGhpcy5zY3JvbGxLZXkgPSBEYXRlLm5vdygpCiAgICB9LAoKICAgIC8qKgogICAgICog6I635Y+W5YiX6KGoCiAgICAgKi8KICAgIGdldExpc3QoKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogMTUsCiAgICAgICAgbGFiZWw6IHRoaXMubGFiZWxWYWx1ZQogICAgICB9CiAgICAgIGlmICh0aGlzLmlzVW5SZWFkKSB7CiAgICAgICAgcGFyYW1zLmlzUmVhZCA9IDAKICAgICAgfQogICAgICAvLyBzeXN0ZW1NZXNzYWdlTGlzdEFQSShwYXJhbXMpCiAgICAgIC8vICAgLnRoZW4ocmVzID0+IHsKICAgICAgLy8gICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIC8vICAgICBpZiAodGhpcy5sYWJlbFZhbHVlID09IHBhcmFtcy5sYWJlbCkgewogICAgICAvLyAgICAgICBpZiAoIXRoaXMubm9Nb3JlKSB7CiAgICAgIC8vICAgICAgICAgaWYgKHRoaXMucGFnZSA9PSAxKSB7CiAgICAgIC8vICAgICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YS5saXN0CiAgICAgIC8vICAgICAgICAgfSBlbHNlIHsKICAgICAgLy8gICAgICAgICAgIHRoaXMubGlzdCA9IHRoaXMubGlzdC5jb25jYXQocmVzLmRhdGEubGlzdCkKICAgICAgLy8gICAgICAgICB9CiAgICAgIC8vICAgICAgICAgdGhpcy5wYWdlKysKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgICAgICB0aGlzLm5vTW9yZSA9IHJlcy5kYXRhLmxhc3RQYWdlCiAgICAgIC8vICAgICB9IGVsc2UgewogICAgICAvLyAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCkKICAgICAgLy8gICAgIH0KICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgICAgIC8vICAgICB0aGlzLm5vTW9yZSA9IHRydWUKICAgICAgLy8gICAgIHRoaXMubG9hZGluZyA9IGZhbHNlCiAgICAgIC8vICAgfSkKICAgIH0sCgogICAgLyoqCiAgICAgKiDmn6XnnIvor6bmg4UKICAgICAqLwogICAgY2hlY2tDUk1EZXRhaWwodHlwZSwgaWQsIGRhdGFJbmRleCwgZGF0YSkgewogICAgICBpZiAodHlwZSA9PT0gJ3NjaGVkdWxlJykgewogICAgICAgIHRoaXMucmVsYXRpb25JRCA9IGlkCiAgICAgICAgaWYgKGRhdGEuY29udGVudCkgewogICAgICAgICAgdGhpcy50b2RheURldGFpbERhdGEgPSBKU09OLnBhcnNlKGRhdGEuY29udGVudCkKICAgICAgICB9CiAgICAgICAgdGhpcy5zaG93VG9kYXlEZXRhaWwgPSB0cnVlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5yZWxhdGlvbklEID0gaWQKICAgICAgICB0aGlzLnJlbGF0aW9uQ3JtVHlwZSA9IHR5cGUKICAgICAgICB0aGlzLnNob3dGdWxsRGV0YWlsID0gdHJ1ZQogICAgICB9CiAgICB9LAoKICAgIC8qKgogICAgICog5LiL6L296ZSZ6K+v5pWw5o2uCiAgICAgKi8KICAgIGRvd25sb2FkRXJyb3IobWVzc2FnZUlkKSB7CiAgICAgIC8vIGNybURvd25JbXBvcnRFcnJvckFQSSh7IG1lc3NhZ2VJZCB9KQogICAgICAvLyAgIC50aGVuKHJlcyA9PiB7CiAgICAgIC8vICAgICBkb3dubG9hZEV4Y2VsV2l0aFJlc0RhdGEocmVzKQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKCgpID0+IHsKICAgICAgLy8gICB9KQogICAgfSwKCiAgICAvKioKICAgICAqIOivu+WPlua2iOaBrwogICAgICovCiAgICByZWFkTWVzc2FnZUNsaWNrKG1lc3NhZ2VJZCwgaW5kZXgpIHsKICAgICAgLy8gc3lzdGVtTWVzc2FnZVJlYWRBUEkoeyBtZXNzYWdlSWQgfSkKICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgdGhpcy5saXN0W2luZGV4XS5pc1JlYWQgPSAxCiAgICAgIC8vICAgICB0aGlzLiRlbWl0KCd1cGRhdGUtY291bnQnKQogICAgICAvLyAgIH0pCiAgICAgIC8vICAgLmNhdGNoKCgpID0+IHsKICAgICAgLy8gICB9KQogICAgfSwKCiAgICBkZWxldGVNZXNzYWdlQ2xpY2sobWVzc2FnZUlkLCBpbmRleCkgewogICAgICAvLyB0aGlzLiRjb25maXJtKCfnoa7lrprliKDpmaTov5nmnaHmtojmga8/JywgJ+aPkOekuicsIHsKICAgICAgLy8gICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgIC8vICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsCiAgICAgIC8vICAgdHlwZTogJ3dhcm5pbmcnCiAgICAgIC8vIH0pCiAgICAgIC8vICAgLnRoZW4oKCkgPT4gewogICAgICAvLyAgICAgc3lzdGVtTWVzc2FnZURlbGV0ZUJ5SWRBUEkobWVzc2FnZUlkKQogICAgICAvLyAgICAgICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgICAgIHRoaXMubGlzdC5zcGxpY2UoaW5kZXgsIDEpCiAgICAgIC8vICAgICAgICAgdGhpcy4kZW1pdCgndXBkYXRlLWNvdW50JykKICAgICAgLy8gICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpCiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgICAgIC5jYXRjaCgoKSA9PiB7fSkKICAgICAgLy8gICB9KQogICAgICAvLyAgIC5jYXRjaCgoKSA9PiB7CiAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgLy8gICAgICAgdHlwZTogJ2luZm8nLAogICAgICAvLyAgICAgICBtZXNzYWdlOiAn5bey5Y+W5raI5pON5L2cJwogICAgICAvLyAgICAgfSkKICAgICAgLy8gICB9KQogICAgfSwKCiAgICBoYW5kbGVDb21tYW5kKGFjdGlvbikgewogICAgICBpZiAoYWN0aW9uID09PSAnZGVsZXRlJykgewogICAgICAgIHRoaXMuYWxsRGVsZXRlQ2xpY2soKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWxsTWFya0RvbmVDbGljaygpCiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiDlhajpg6jmoIforrDlrozmiJAKICAgICAqLwogICAgYWxsTWFya0RvbmVDbGljaygpIHsKICAgICAgLy8gc3lzdGVtTWVzc2FnZVJlYWRBbGxBUEkoewogICAgICAvLyAgIGxhYmVsOiB0aGlzLmxhYmVsVmFsdWUKICAgICAgLy8gfSkKICAgICAgLy8gICAudGhlbihyZXMgPT4gewogICAgICAvLyAgICAgdGhpcy5saXN0LmZvckVhY2goaXRlbSA9PiB7CiAgICAgIC8vICAgICAgIGl0ZW0uaXNSZWFkID0gMQogICAgICAvLyAgICAgfSkKICAgICAgLy8gICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZS1jb3VudCcpCiAgICAgIC8vICAgfSkKICAgICAgLy8gICAuY2F0Y2goKCkgPT4gewogICAgICAvLyAgIH0pCiAgICB9LAoKICAgIC8qKgogICAgICog5YWo6YOo5Yig6ZmkCiAgICAgKi8KICAgIGFsbERlbGV0ZUNsaWNrKCkgewogICAgICBpZiAodGhpcy5jdXJyZW50TWVudSkgewogICAgICAgIGNvbnN0IG5hbWUgPSB0aGlzLmN1cnJlbnRNZW51LmxhYmVsID09ICdhbGwnID8gJycgOiB0aGlzLmN1cnJlbnRNZW51Lm5hbWUKICAgICAgICAvLyB0aGlzLiRjb25maXJtKGDnoa7lrprliKDpmaTlhajpg6gke25hbWV95bey6K+75raI5oGvP2AsICfmj5DnpLonLCB7CiAgICAgICAgLy8gICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCiAgICAgICAgLy8gICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICAvLyAgIHR5cGU6ICd3YXJuaW5nJwogICAgICAgIC8vIH0pCiAgICAgICAgLy8gICAudGhlbigoKSA9PiB7CiAgICAgICAgLy8gICAgIHN5c3RlbU1lc3NhZ2VDbGVhckFQSSh7CiAgICAgICAgLy8gICAgICAgbGFiZWw6IHRoaXMubGFiZWxWYWx1ZQogICAgICAgIC8vICAgICB9KQogICAgICAgIC8vICAgICAgIC50aGVuKHJlcyA9PiB7CiAgICAgICAgLy8gICAgICAgICB0aGlzLnJlZnJlc2hMaXN0KCkKICAgICAgICAvLyAgICAgICAgIHRoaXMuJGVtaXQoJ3VwZGF0ZS1jb3VudCcpCiAgICAgICAgLy8gICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoJ+aTjeS9nOaIkOWKnycpCiAgICAgICAgLy8gICAgICAgfSkKICAgICAgICAvLyAgICAgICAuY2F0Y2goKCkgPT4ge30pCiAgICAgICAgLy8gICB9KQogICAgICAgIC8vICAgLmNhdGNoKCgpID0+IHsKICAgICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgLy8gICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgIC8vICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojmk43kvZwnCiAgICAgICAgLy8gICAgIH0pCiAgICAgICAgLy8gICB9KQogICAgICB9CiAgICB9LAoKICAgIGhpZGRlblZpZXcoKSB7CiAgICAgIHRoaXMuc2hvd0RldGFpbCA9IGZhbHNlCiAgICB9LAoKICAgIGhhbmRsZURvY3VtZW50Q2xpY2soZSkgewogICAgICBlLnN0b3BQcm9wYWdhdGlvbigpCiAgICAgIGlmICh0aGlzLiRlbCA9PSBlLnRhcmdldCkgewogICAgICAgIHRoaXMuc2hvd0RldGFpbCA9IGZhbHNlCiAgICAgIH0KICAgIH0KICB9Cn0K"},{"version":3,"sources":["SystemMessage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SystemMessage.vue","sourceRoot":"src/layout/components","sourcesContent":["<template>\n  <div\n    v-show=\"visible\"\n    class=\"full-container\"\n  >\n    <!-- <slide-view\n      v-if=\"showDetail\"\n      :show-close=\"false\"\n      :no-listener-class=\"['bell-message-hook']\"\n      class=\"d-view\"\n      @close=\"hiddenView\"\n    >\n      <div class=\"sm-main\">\n        <div class=\"sm-main__hd\">\n          <span class=\"title\">{{ title }}</span>\n          <el-button\n            v-if=\"permissionSave && onlyAnnouncement\"\n            icon=\"el-icon-plus\"\n            class=\"notice-btn\"\n            type=\"text\"\n            @click=\"createNotice\"\n          >新建公告</el-button>\n        </div>\n\n        <flexbox\n          v-if=\"!onlyAnnouncement\"\n          class=\"menu\"\n          wrap=\"wrap\"\n        >\n          <el-badge\n            v-for=\"(item, index) in menuList\"\n            :key=\"index\"\n            :value=\"unreadNums[item.countKey]\"\n            :hidden=\"!unreadNums[item.countKey] || unreadNums[item.countKey] == 0\"\n            :max=\"99\"\n          >\n            <el-button\n              :class=\"{'is-current': menuLabel == item.label}\"\n              type=\"primary\"\n              @click.native=\"menuClick(item.label)\"\n            >{{ item.name }}</el-button>\n          </el-badge>\n        </flexbox>\n\n        <div\n          :style=\"{ height: contentHeight }\"\n          class=\"sm-main__bd\"\n        >\n          <div\n            :key=\"scrollKey\"\n            v-infinite-scroll=\"getList\"\n            infinite-scroll-distance=\"100\"\n            infinite-scroll-disabled=\"scrollDisabled\"\n          >\n            <message-cell\n              v-for=\"(item, index) in list\"\n              :key=\"index\"\n              :data=\"item\"\n              :data-index=\"index\"\n              @detail=\"checkCRMDetail\"\n              @download=\"downloadError\"\n              @read=\"readMessageClick\"\n              @delete=\"deleteMessageClick\"\n            />\n          </div>\n          <p\n            v-if=\"loading\"\n            class=\"scroll-bottom-tips\"\n          >加载中...</p>\n          <p\n            v-if=\"noMore\"\n            class=\"scroll-bottom-tips\"\n          >没有更多了</p>\n        </div>\n\n        <flexbox class=\"sm-main__ft\">\n          <div class=\"switch-read\">\n            <el-switch\n              v-model=\"isUnRead\"\n              @change=\"refreshList\"\n            />\n            <span class=\"switch-read__title\">仅显示未读消息</span>\n          </div>\n          <el-dropdown\n            trigger=\"click\"\n            @command=\"handleCommand\"\n          >\n            <i\n              class=\"el-icon-more more\"\n            />\n            <el-dropdown-menu slot=\"dropdown\">\n              <el-dropdown-item\n                icon=\"el-icon-check\"\n                command=\"read\"\n              >{{ `全部${currentMenu.label == 'all' ? '' : currentMenu.name}标记为已读` }}</el-dropdown-item>\n              <el-dropdown-item\n                icon=\"wk wk-s-delete\"\n                command=\"delete\"\n              >{{ `删除${currentMenu.name}已读消息` }}</el-dropdown-item>\n            </el-dropdown-menu>\n          </el-dropdown>\n        </flexbox>\n      </div>\n    </slide-view> -->\n\n    <!-- CRM详情 -->\n    <!-- <c-r-m-full-screen-detail\n      :id=\"relationID\"\n      :visible.sync=\"showFullDetail\"\n      :crm-type=\"relationCrmType\"\n    /> -->\n\n    <!-- <today-list-detail\n      :id=\"relationID\"\n      :show-today-detail=\"showTodayDetail\"\n      :today-detail-data=\"todayDetailData\"\n      @deleteSuccess=\"todayHandle\"\n      @createSuccess=\"todayHandle\"\n      @close=\"showTodayDetail = false\"/> -->\n  </div>\n</template>\n\n<script>\n// import {\n//   systemMessageListAPI,\n//   systemMessageReadAPI,\n//   systemMessageReadAllAPI,\n//   systemMessageClearAPI,\n//   systemMessageDeleteByIdAPI } from '@/api/common'\n// import {\n//   crmDownImportErrorAPI\n// } from '@/api/crm/common'\n// import SlideView from '@/components/SlideView'\nimport MessageCell from './MessageCell'\n\nimport { getMaxIndex, downloadExcelWithResData } from '@/utils/index'\nimport { mapGetters } from 'vuex'\n\nexport default {\n  // 导航头部系统消息\n  name: 'SystemMessage',\n  components: {\n    // SlideView,\n    MessageCell\n    // CRMFullScreenDetail: () =>\n    //   import('@/components/CRMFullScreenDetail')\n  },\n  props: {\n    visible: {\n      type: Boolean,\n      default: false\n    },\n    // 仅公告\n    onlyAnnouncement: {\n      type: Boolean,\n      default: false\n    },\n    unreadNums: Object\n  },\n  data() {\n    return {\n      showTodayDetail: false,\n      todayDetailData: {},\n      showDetail: false,\n      // 1 任务 2 日志 3 oa审批 4公告 5 日程 6 客户管理\n      menuLabel: 'all',\n\n      // 公告\n      announcementAddShow: false,\n\n      // 列表\n      list: [],\n      loading: false,\n      noMore: false,\n      scrollKey: Date.now(),\n      page: 1,\n      isUnRead: false, // 仅展示未读\n\n      // CRM详情\n      showFullDetail: false, // 查看相关客户管理详情\n      relationID: '', // 相关ID参数\n      relationCrmType: '' // 相关类型\n    }\n  },\n  computed: {\n    ...mapGetters(['oa', 'crm', 'project']),\n    permissionSave() {\n      return this.oa && this.oa.announcement && this.oa.announcement.save\n    },\n    title() {\n      if (this.onlyAnnouncement) {\n        return this.unreadNums.announceCount && this.unreadNums.announceCount > 0 ? `公告（${this.unreadNums.announceCount}）` : '公告'\n      }\n      return this.unreadNums.allCunt > 0 ? `通知（${this.unreadNums.allCunt}）` : '通知'\n    },\n\n    scrollDisabled() {\n      return this.loading || this.noMore\n    },\n\n    labelValue() {\n      if (this.onlyAnnouncement) {\n        return 4\n      }\n      return this.menuLabel == 'all' ? '' : this.menuLabel\n    },\n\n    contentHeight() {\n      if (this.menuList.length > 7) {\n        return 'calc(100% - 110px)'\n      }\n      return 'calc(100% - 155px)'\n    },\n\n    menuList() {\n      const menuList = [{\n        name: '全部',\n        label: 'all',\n        countKey: 'allCount'\n      }]\n\n      if (this.oa) {\n        // menuList.push({\n        //   name: '公告',\n        //   label: 4,\n        //   countKey: 'announceCount'\n        // })\n\n        if (this.oa.taskExamine) {\n          menuList.push({\n            name: '办公审批',\n            label: 3,\n            countKey: 'examineCount'\n          })\n        }\n      }\n\n      if ((this.oa && this.oa.taskExamine) || this.project) {\n        menuList.push({\n          name: '任务',\n          label: 1,\n          countKey: 'taskCount'\n        })\n      }\n\n      if (this.oa && this.oa.log) {\n        menuList.push({\n          name: '日志',\n          label: 2,\n          countKey: 'logCount'\n        })\n      }\n\n      if (this.crm) {\n        menuList.push({\n          name: '客户管理',\n          label: 6,\n          countKey: 'crmCount'\n        })\n      }\n\n      if (this.oa && this.oa.calendar) {\n        menuList.push({\n          name: '日程',\n          label: 5,\n          countKey: 'eventCount'\n        })\n      }\n\n      return menuList\n    },\n\n    currentMenu() {\n      return this.menuList.find(item => {\n        return item.label === this.menuLabel\n      })\n    }\n  },\n  watch: {\n    visible: {\n      handler(val) {\n        this.showDetail = val\n        if (val) {\n          this.$el.style.zIndex = getMaxIndex()\n          this.refreshList()\n        }\n      },\n      immediate: true\n    },\n    showDetail(val) {\n      if (!val) {\n        setTimeout(() => {\n          this.$emit('update:visible', false)\n        }, 350)\n      }\n    }\n  },\n  mounted() {\n    document.body.appendChild(this.$el)\n    this.$el.addEventListener('click', this.handleDocumentClick, false)\n  },\n\n  beforeDestroy() {\n    // remove DOM node after destroy\n    if (this.$el && this.$el.parentNode) {\n      this.$el.parentNode.removeChild(this.$el)\n      this.$el.removeEventListener('click', this.handleDocumentClick, false)\n    }\n  },\n  methods: {\n    /**\n     * 日程事件\n     */\n    todayHandle() {\n      this.$bus.emit('handleSuccess')\n      this.showTodayDetail = false\n    },\n\n    /**\n     * 新建公告\n     */\n    createNotice() {\n      this.announcementAddShow = true\n    },\n\n    announcementSubmiteSuccess() {\n      setTimeout(() => {\n        this.refreshList()\n        this.$emit('update-count')\n      }, 1000)\n    },\n\n    /**\n     * 身体\n     */\n\n    /**\n     * 菜单点击\n     */\n    menuClick(label) {\n      this.menuLabel = label\n      this.refreshList()\n    },\n\n    /**\n     * 刷新列表\n     */\n    refreshList() {\n      this.page = 1\n      this.list = []\n      this.noMore = false\n      this.scrollKey = Date.now()\n    },\n\n    /**\n     * 获取列表\n     */\n    getList() {\n      this.loading = true\n      const params = {\n        page: this.page,\n        limit: 15,\n        label: this.labelValue\n      }\n      if (this.isUnRead) {\n        params.isRead = 0\n      }\n      // systemMessageListAPI(params)\n      //   .then(res => {\n      //     this.loading = false\n      //     if (this.labelValue == params.label) {\n      //       if (!this.noMore) {\n      //         if (this.page == 1) {\n      //           this.list = res.data.list\n      //         } else {\n      //           this.list = this.list.concat(res.data.list)\n      //         }\n      //         this.page++\n      //       }\n      //       this.noMore = res.data.lastPage\n      //     } else {\n      //       this.refreshList()\n      //     }\n      //   })\n      //   .catch(() => {\n      //     this.noMore = true\n      //     this.loading = false\n      //   })\n    },\n\n    /**\n     * 查看详情\n     */\n    checkCRMDetail(type, id, dataIndex, data) {\n      if (type === 'schedule') {\n        this.relationID = id\n        if (data.content) {\n          this.todayDetailData = JSON.parse(data.content)\n        }\n        this.showTodayDetail = true\n      } else {\n        this.relationID = id\n        this.relationCrmType = type\n        this.showFullDetail = true\n      }\n    },\n\n    /**\n     * 下载错误数据\n     */\n    downloadError(messageId) {\n      // crmDownImportErrorAPI({ messageId })\n      //   .then(res => {\n      //     downloadExcelWithResData(res)\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n\n    /**\n     * 读取消息\n     */\n    readMessageClick(messageId, index) {\n      // systemMessageReadAPI({ messageId })\n      //   .then(res => {\n      //     this.list[index].isRead = 1\n      //     this.$emit('update-count')\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n\n    deleteMessageClick(messageId, index) {\n      // this.$confirm('确定删除这条消息?', '提示', {\n      //   confirmButtonText: '确定',\n      //   cancelButtonText: '取消',\n      //   type: 'warning'\n      // })\n      //   .then(() => {\n      //     systemMessageDeleteByIdAPI(messageId)\n      //       .then(res => {\n      //         this.list.splice(index, 1)\n      //         this.$emit('update-count')\n      //         this.$message.success('操作成功')\n      //       })\n      //       .catch(() => {})\n      //   })\n      //   .catch(() => {\n      //     this.$message({\n      //       type: 'info',\n      //       message: '已取消操作'\n      //     })\n      //   })\n    },\n\n    handleCommand(action) {\n      if (action === 'delete') {\n        this.allDeleteClick()\n      } else {\n        this.allMarkDoneClick()\n      }\n    },\n\n    /**\n     * 全部标记完成\n     */\n    allMarkDoneClick() {\n      // systemMessageReadAllAPI({\n      //   label: this.labelValue\n      // })\n      //   .then(res => {\n      //     this.list.forEach(item => {\n      //       item.isRead = 1\n      //     })\n      //     this.$emit('update-count')\n      //   })\n      //   .catch(() => {\n      //   })\n    },\n\n    /**\n     * 全部删除\n     */\n    allDeleteClick() {\n      if (this.currentMenu) {\n        const name = this.currentMenu.label == 'all' ? '' : this.currentMenu.name\n        // this.$confirm(`确定删除全部${name}已读消息?`, '提示', {\n        //   confirmButtonText: '确定',\n        //   cancelButtonText: '取消',\n        //   type: 'warning'\n        // })\n        //   .then(() => {\n        //     systemMessageClearAPI({\n        //       label: this.labelValue\n        //     })\n        //       .then(res => {\n        //         this.refreshList()\n        //         this.$emit('update-count')\n        //         this.$message.success('操作成功')\n        //       })\n        //       .catch(() => {})\n        //   })\n        //   .catch(() => {\n        //     this.$message({\n        //       type: 'info',\n        //       message: '已取消操作'\n        //     })\n        //   })\n      }\n    },\n\n    hiddenView() {\n      this.showDetail = false\n    },\n\n    handleDocumentClick(e) {\n      e.stopPropagation()\n      if (this.$el == e.target) {\n        this.showDetail = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.full-container {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: auto;\n  margin: 0;\n  background-color: rgba(0, 0, 0, 0.3);\n}\n\n.d-view {\n  position: fixed;\n  width: 530px;\n  top: 0px;\n  bottom: 0px;\n  right: 0px;\n  background-color: white;\n  ::v-deep .el-card__body {\n    height: 100%;\n  }\n}\n\n.sm-main {\n  height: 100%;\n  position: relative;\n\n  &__hd {\n    padding: 0 20px;\n    height: 50px;\n    line-height: 50px;\n    font-size: 14px;\n    color: #333;\n    background-color: #f7f8fa;\n\n    .title {\n      font-weight: 600;\n    }\n\n    .notice-btn {\n      float: right;\n      margin-top: 10px;\n    }\n  }\n\n  &__bd {\n    overflow-y: auto;\n  }\n\n  &__ft {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -1px;\n    height: 50px;\n    background-color: #f7f8fa;\n    padding: 0 15px;\n\n    .switch-read {\n      flex: 1;\n      &__title {\n        font-size: 13px;\n        margin-left: 10px;\n        color: #333;\n      }\n    }\n\n    .more {\n      flex-shrink: 0;\n      cursor: pointer;\n    }\n\n    .more:hover {\n      color: $xr-color-primary;\n    }\n  }\n}\n\n// 菜单\n.menu {\n  overflow-x: auto;\n  overflow-y: hidden;\n  padding-right: 15px;\n  margin-bottom: 15px;\n  // line-height: 60px;\n  border-top: 1px solid $xr-border-color-base;\n  // border-bottom: 1px solid $xr-border-color-base;\n\n  .el-button {\n    color: #666;\n    margin-left: 15px;\n    background-color: $xr--background-color-base;\n    border-color: $xr--background-color-base;\n    font-size: 12px;\n    height: 28px;\n    border-radius: 14px;\n    ::v-deep i {\n      font-size: 12px;\n      margin-right: 5px;\n    }\n  }\n\n  .el-button--primary.is-current,\n  .el-button--primary:hover {\n    background: $xr-color-primary;\n    border-color: $xr-color-primary;\n    color: #ffffff;\n  }\n\n  .el-badge {\n    margin-top: 15px;\n  }\n}\n\n.scroll-bottom-tips {\n  margin: 15px 0 65px;\n}\n\n.el-badge {\n  ::v-deep .el-badge__content.is-fixed {\n    z-index: 2;\n  }\n}\n</style>\n"]}]}