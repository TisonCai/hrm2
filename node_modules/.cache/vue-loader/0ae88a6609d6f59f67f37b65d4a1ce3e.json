{"remainingRequest":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/caichaosen/Code/web/hrm-ui2/src/layout/components/MessageCell.vue?vue&type=style&index=0&id=606a8528&lang=scss&scoped=true&","dependencies":[{"path":"/Users/caichaosen/Code/web/hrm-ui2/src/layout/components/MessageCell.vue","mtime":1612492075515},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/style-resources-loader/lib/index.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/caichaosen/Code/web/hrm-ui2/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm1lc3NhZ2UtY2VsbCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIGZvbnQtc2l6ZTogMTRweDsKICBjb2xvcjogIzMzMzsKICBwYWRkaW5nOiAxNXB4IDIwcHggMTVweCAxNXB4OwogIGxpbmUtaGVpZ2h0OiAxLjU7CgogICZfX2hkIHsKICAgIGZsZXgtc2hyaW5rOiAwOwogICAgbWFyZ2luLXJpZ2h0OiAxNXB4OwogICAgYmFja2dyb3VuZC1jb2xvcjogJHhyLWNvbG9yLXByaW1hcnk7CiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICB3aWR0aDogMjhweDsKICAgIGhlaWdodDogMjhweDsKICAgIGxpbmUtaGVpZ2h0OiAyOHB4OwogICAgYm9yZGVyLXJhZGl1czogMTRweDsKCiAgICAud2sgewogICAgICBjb2xvcjogd2hpdGU7CiAgICAgIGZvbnQtc2l6ZTogMTNweDsKICAgIH0KICB9CgogICZfX2JkIHsKICAgIGZsZXg6IDE7CiAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7CiAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7CiAgICB3b3JkLWJyZWFrOiBicmVhay1hbGw7CiAgfQoKICAmX19mdCB7CiAgICBmbGV4LXNocmluazogMDsKICAgIGZvbnQtc2l6ZTogMTJweDsKICAgIGNvbG9yOiAjOTk5OwogICAgd2lkdGg6IDg1cHg7CiAgICBtYXJnaW4tbGVmdDogMzVweDsKICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgcG9zaXRpb246IHJlbGF0aXZlOwoKICAgIC5oYW5kbGUgewogICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgIHRvcDogMjBweDsKICAgICAgcmlnaHQ6IDA7CiAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgY29sb3I6ICM5OTk7CiAgICAgIC5jaGVjaywKICAgICAgLmRlbGV0ZSB7CiAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuOwogICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgfQoKICAgICAgLmNoZWNrICsgLmRlbGV0ZSB7CiAgICAgICAgbWFyZ2luLWxlZnQ6IDVweDsKICAgICAgfQoKICAgICAgLmNoZWNrOmhvdmVyIHsKICAgICAgICBjb2xvcjogJHhyLWNvbG9yLXByaW1hcnk7CiAgICAgIH0KICAgICAgLmRlbGV0ZTpob3ZlciB7CiAgICAgICAgY29sb3I6ICNGNTZDNkM7CiAgICAgIH0KICAgIH0KICB9CgogICYuaXMtdW5yZWFkOjpiZWZvcmUgewogICAgY29udGVudDogJyc7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICB0b3A6IDIwcHg7CiAgICByaWdodDogOHB4OwogICAgd2lkdGg6IDZweDsKICAgIGhlaWdodDogNnB4OwogICAgYm9yZGVyLXJhZGl1czogM3B4OwogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y5NGU0ZTsKICB9CgogICY6aG92ZXIgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y3ZjhmYTsKICAgIC5kZWxldGUgewogICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlOwogICAgfQogIH0KCiAgJi5pcy11bnJlYWQ6aG92ZXIgewogICAgLmNoZWNrIHsKICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTsKICAgIH0KICB9Cn0KCi5jbGljay1jb250ZW50IHsKICBjb2xvcjogJHhyLWNvbG9yLXByaW1hcnk7CiAgY3Vyc29yOiBwb2ludGVyOwoKICAmOmhvdmVyIHsKICAgIHRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOwogIH0KfQoKLmlzLWludmFsaWQgewogIGNvbG9yOiAjOTk5OwogIHBvaW50ZXItZXZlbnRzOiBub25lOwogIGN1cnNvcjogaW5pdGlhbDsKfQo="},{"version":3,"sources":["MessageCell.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6UA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"MessageCell.vue","sourceRoot":"src/layout/components","sourcesContent":["<template>\n  <flexbox\n    :class=\"{ 'is-unread' :data.isRead == 0 }\"\n    class=\"message-cell\"\n    align=\"stretch\"\n  >\n    <div class=\"message-cell__hd\">\n      <i\n        :class=\"typeObj.icon\"\n      />\n    </div>\n\n    <div class=\"message-cell__bd\">\n      <span>{{ leftContent }}</span>\n      <span :class=\"[{ 'is-invalid': isInvalid }, 'click-content']\" @click=\"enterDetail\">{{ centerCotent }}</span>\n      <span>{{ rightContent }}</span>\n    </div>\n\n    <div class=\"message-cell__ft\">\n      <div>{{ data.createTime | formatTime }} </div>\n      <div class=\"handle\">\n        <span class=\"check\" @click=\"messageReadClick\">标记已读</span>\n        <span class=\"delete\" @click=\"messageDeleteClick\">删除</span>\n      </div>\n    </div>\n  </flexbox>\n</template>\n\n<script>\n// import moment from 'moment'\nexport default {\n  // 消息cell\n  name: 'MessageCell',\n  components: {\n\n  },\n  props: {\n    data: Object,\n    dataIndex: Number\n  },\n  data() {\n    return {}\n  },\n  computed: {\n    typeObj() {\n      const typesObj = {\n        leads: {\n          icon: 'wk wk-leads',\n          color: '#6995FF',\n          type: 'leads'\n        },\n        customer: {\n          icon: 'wk wk-customer',\n          color: '#6995FF',\n          type: 'customer'\n        },\n        contacts: {\n          icon: 'wk wk-contacts',\n          color: '#6995FF',\n          type: 'contacts'\n        },\n        business: {\n          icon: 'wk wk-business',\n          color: '#6995FF',\n          type: 'business'\n        },\n        contract: {\n          icon: 'wk wk-contract',\n          color: '#6995FF',\n          type: 'contract'\n        },\n        receivables: {\n          icon: 'wk wk-receivables',\n          color: '#6995FF',\n          type: 'receivables'\n        },\n        product: {\n          icon: 'wk wk-product',\n          color: '#6995FF',\n          type: 'product'\n        },\n        log: {\n          icon: 'wk wk-log',\n          color: '#6995FF',\n          type: 'log'\n        },\n        examine: {\n          icon: 'wk wk-approve',\n          color: '#6995FF',\n          type: 'examine'\n        },\n        task: {\n          icon: 'wk wk-o-task',\n          color: '#6995FF',\n          type: 'task'\n        },\n        announcement: {\n          icon: 'wk wk-announcement',\n          color: '#6995FF',\n          type: 'announcement'\n        },\n        schedule: {\n          icon: 'wk wk-schedule',\n          color: '#6995FF',\n          type: 'schedule'\n        },\n        invoice: {\n          icon: 'wk wk-invoice',\n          color: '#6995FF',\n          type: 'invoice'\n        }\n      }\n\n      // 1 任务 2 日志 3 oa审批 4公告 5 日程 6 客户管理\n      let key = ''\n      if (this.data.label && this.data.label <= 5) {\n        key = ['task', 'log', 'examine', 'announcement', 'schedule'][this.data.label - 1]\n      } else {\n        if ([1, 2, 3].includes(this.data.type)) {\n          key = 'task'\n        } else if ([4, 5, 34].includes(this.data.type)) {\n          key = 'log'\n        } else if ([6, 7, 25].includes(this.data.type)) {\n          key = 'examine'\n        } else if ([8].includes(this.data.type)) {\n          key = 'announcement'\n        } else if ([10, 11, 24, 26, 30, 33].includes(this.data.type)) {\n          key = 'contract'\n        } else if ([12, 13, 27].includes(this.data.type)) {\n          key = 'receivables'\n        } else if ([14, 15, 23, 29, 32].includes(this.data.type)) {\n          key = 'customer'\n        } else if ([16, 17].includes(this.data.type)) {\n          key = 'contacts'\n        } else if ([18, 19].includes(this.data.type)) {\n          key = 'leads'\n        } else if ([20, 21].includes(this.data.type)) {\n          key = 'product'\n        } else if ([22, 28, 31].includes(this.data.type)) {\n          key = 'business'\n        } else if ([35, 36, 37].includes(this.data.type)) {\n          key = 'invoice'\n        }\n      }\n\n      return typesObj[key]\n    },\n\n    leftContent() {\n      return {\n        1: `${this.data.realname}将`,\n        2: `${this.data.realname}邀请您参与`,\n        3: `${this.data.realname}将`,\n        4: `${this.data.realname}回复了您的`,\n        5: `${this.data.realname}将日志`,\n        6: `${this.data.realname}拒绝您的`,\n        7: `${this.data.realname}已经审核通过您的`,\n        8: `您有一个新公告`,\n        9: `${this.data.realname}邀请您参与`,\n        10: `${this.data.realname}拒绝您的`,\n        11: `${this.data.realname}已经审核通过您的`,\n        12: `${this.data.realname}拒绝您的`,\n        13: `${this.data.realname}已经审核通过您的`,\n        14: `${this.data.realname}导入客户数据${this.data.title}条，${this.getImportContent(this.data)}`,\n        15: `${this.data.realname}取消导入客户数据，已导入${this.data.title}条，${this.getImportContent(this.data)}`,\n        16: `${this.data.realname}导入联系人数据${this.data.title}条，${this.getImportContent(this.data)}`,\n        17: `${this.data.realname}取消导入联系人数据，已导入${this.data.title}条，${this.getImportContent(this.data)}`,\n        18: `${this.data.realname}导入线索数据${this.data.title}条，${this.getImportContent(this.data)}`,\n        19: `${this.data.realname}取消导入线索数据，已导入${this.data.title}条，${this.getImportContent(this.data)}`,\n        20: `${this.data.realname}导入产品数据${this.data.title}条，${this.getImportContent(this.data)}`,\n        21: `${this.data.realname}取消导入产品数据，已导入${this.data.title}条，${this.getImportContent(this.data)}`,\n        22: `${this.data.realname}将您添加为商机`,\n        23: `${this.data.realname}将您添加为客户`,\n        24: `${this.data.realname}将您添加为合同`,\n        25: `${this.data.realname}提交了`,\n        26: `${this.data.realname}提交了`,\n        27: `${this.data.realname}提交了`,\n        28: `${this.data.realname}退出了您商机`,\n        29: `${this.data.realname}退出了您客户`,\n        30: `${this.data.realname}退出了您合同`,\n        31: `${this.data.realname}将您移出了商机`,\n        32: `${this.data.realname}将您移出了客户`,\n        33: `${this.data.realname}将您移出了合同`,\n        34: `${this.data.realname}回复了您评论的日志`,\n        35: `${this.data.realname}拒绝您的`,\n        36: `${this.data.realname}已经审核通过您的`,\n        37: `${this.data.realname}提交了`\n      }[this.data.type]\n    },\n\n    centerCotent() {\n      // 导入提示与其他不一样\n      if (this.isImportType) {\n        // title 是总数 content 是错误数据 valid 错误文件是否有效 1 有效 0 失效\n        const list = this.data.content.split(',') || []\n        const errSize = Number(list[0] || 0)\n        if (errSize > 0) {\n          return this.data.valid === 0 ? '已失效' : '点击下载错误数据'\n        }\n        return ''\n      } else {\n        return `《${this.data.title}》`\n      }\n    },\n\n    isInvalid() {\n      if (this.isImportType) {\n        // title 是总数 content 是错误数据 valid 错误文件是否有效 1 有效 0 失效\n        return this.data.valid == 0\n      } else {\n        return false\n      }\n    },\n\n    /**\n     * 是导入type\n     */\n    isImportType() {\n      return this.data.type >= 14 && this.data.type <= 21\n    },\n\n    rightContent() {\n      return {\n        1: `任务分配给您，请及时查看`,\n        2: `任务，请及时查看`,\n        3: `任务标记结束`,\n        4: `日志：“${this.data.content}”，请及时查看`,\n        5: `发送给您，请及时查看`,\n        6: `，拒绝理由：“${this.data.content}”，请及时处理`,\n        7: `，请及时查看`,\n        8: `，请及时查看`,\n        9: `的日程，${this.getStartTime(this.data.content)}请及时查看`,\n        10: `合同审批，拒绝理由：“${this.data.content}”，请及时处理`,\n        11: `合同，请及时查看`,\n        12: `回款审批，拒绝理由：“${this.data.content}”，请及时处理`,\n        13: `回款，请及时查看`,\n        14: ``,\n        15: ``,\n        16: ``,\n        17: ``,\n        18: ``,\n        19: ``,\n        20: ``,\n        21: ``,\n        22: `的成员`,\n        23: `的成员`,\n        24: `的成员`,\n        25: `，请及时处理`,\n        26: `合同审批，请及时处理`,\n        27: `回款审批，请及时处理`,\n        28: `的团队`,\n        29: `的团队`,\n        30: `的团队`,\n        31: `的团队`,\n        32: `的团队`,\n        33: `的团队`,\n        34: `：“${this.data.content}”，请及时查看`,\n        35: `发票审批，拒绝理由：“${this.data.content}”，请及时处理`,\n        36: `发票审批，请及时查看`,\n        37: `发票审批，请及时处理`\n      }[this.data.type]\n    }\n  },\n  watch: {},\n  mounted() {},\n\n  beforeDestroy() {},\n  methods: {\n    enterDetail() {\n      if (this.isInvalid) {\n        return\n      }\n\n      // 是导入提醒\n      if (this.isImportType) {\n        this.$emit('download', this.data.messageId, this.dataIndex)\n      } else {\n        // 未读触发读\n        if (this.data.isRead == 0) {\n          this.$emit('read', this.data.messageId, this.dataIndex)\n        }\n        this.$emit('detail', this.typeObj.type, this.data.typeId, this.dataIndex, this.data)\n      }\n    },\n\n    /**\n     * 标记已读\n     */\n    messageReadClick() {\n      this.$emit('read', this.data.messageId, this.dataIndex)\n    },\n\n    /**\n     * 消息删除\n     */\n    messageDeleteClick() {\n      this.$emit('delete', this.data.messageId, this.dataIndex)\n    },\n\n    /**\n     * 日程提醒，多长时间后开始\n     */\n    getStartTime(content) {\n      if (this.data.type != 9) {\n        return\n      }\n      const timeObj = content ? JSON.parse(content) : { type: 0, value: '' }\n\n      let dataValue = ''\n      if (!timeObj.type) {\n        dataValue = ''\n      } else {\n        dataValue = '将于' + timeObj.value + ['', '分钟', '小时', '天'][timeObj.type] + '后开始, '\n      }\n      return dataValue\n    },\n\n    getImportContent({ title, content }) {\n      const countList = [14, 15, 16, 17, 18, 19, 20, 21, 50]\n      if (!countList.includes(this.data.type)) {\n        return\n      }\n      const list = content.split(',') || []\n      const totalSize = Number(title || '0')\n      const updateSize = Number(list[1] || '0')\n      const errSize = Number(list[0] || '0')\n      return `覆盖${updateSize}条，导入成功${totalSize - errSize}条，导入失败${errSize}条。`\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.message-cell {\n  position: relative;\n  font-size: 14px;\n  color: #333;\n  padding: 15px 20px 15px 15px;\n  line-height: 1.5;\n\n  &__hd {\n    flex-shrink: 0;\n    margin-right: 15px;\n    background-color: $xr-color-primary;\n    text-align: center;\n    width: 28px;\n    height: 28px;\n    line-height: 28px;\n    border-radius: 14px;\n\n    .wk {\n      color: white;\n      font-size: 13px;\n    }\n  }\n\n  &__bd {\n    flex: 1;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    word-break: break-all;\n  }\n\n  &__ft {\n    flex-shrink: 0;\n    font-size: 12px;\n    color: #999;\n    width: 85px;\n    margin-left: 35px;\n    text-align: right;\n    position: relative;\n\n    .handle {\n      position: absolute;\n      top: 20px;\n      right: 0;\n      font-size: 12px;\n      color: #999;\n      .check,\n      .delete {\n        visibility: hidden;\n        cursor: pointer;\n      }\n\n      .check + .delete {\n        margin-left: 5px;\n      }\n\n      .check:hover {\n        color: $xr-color-primary;\n      }\n      .delete:hover {\n        color: #F56C6C;\n      }\n    }\n  }\n\n  &.is-unread::before {\n    content: '';\n    position: absolute;\n    top: 20px;\n    right: 8px;\n    width: 6px;\n    height: 6px;\n    border-radius: 3px;\n    background-color: #f94e4e;\n  }\n\n  &:hover {\n    background-color: #f7f8fa;\n    .delete {\n      visibility: visible;\n    }\n  }\n\n  &.is-unread:hover {\n    .check {\n      visibility: visible;\n    }\n  }\n}\n\n.click-content {\n  color: $xr-color-primary;\n  cursor: pointer;\n\n  &:hover {\n    text-decoration: underline;\n  }\n}\n\n.is-invalid {\n  color: #999;\n  pointer-events: none;\n  cursor: initial;\n}\n</style>\n"]}]}